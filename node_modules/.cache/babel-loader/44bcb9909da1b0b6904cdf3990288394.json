{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _dec, _dec2, _class, _class2, _temp2; //外部依赖包\n//import classnames from 'classnames';\n//内部依赖包\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _classnames2 = require('classnames');\n\nvar _classnames3 = _interopRequireDefault(_classnames2);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isNumber = require('lodash/isNumber');\n\nvar _isNumber2 = _interopRequireDefault(_isNumber);\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _clear = require('./decorator/clear');\n\nvar _clear2 = _interopRequireDefault(_clear);\n\nvar _loader = require('../loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nvar _util = require('../utils/util');\n\nvar util = _interopRequireWildcard(_util);\n\nvar _logger = require('../utils/logger');\n\nvar logger = _interopRequireWildcard(_logger);\n\nvar _addEventListener = require('../utils/dom/addEventListener');\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nvar _default = require('../i18n/default');\n\nvar _default2 = _interopRequireDefault(_default);\n\nvar _contextmenu = require('./components/contextmenu');\n\nvar _contextmenu2 = _interopRequireDefault(_contextmenu);\n\nvar _contextmenu3 = require('./contextmenu');\n\nvar _contextmenu4 = _interopRequireDefault(_contextmenu3);\n\nvar _loading = require('./loading');\n\nvar _loading2 = _interopRequireDefault(_loading);\n\nvar _end = require('./end');\n\nvar _end2 = _interopRequireDefault(_end);\n\nvar _notAutoplay = require('./not-autoplay');\n\nvar _notAutoplay2 = _interopRequireDefault(_notAutoplay);\n\nvar _controlbar = require('./controlbar');\n\nvar _controlbar2 = _interopRequireDefault(_controlbar);\n\nvar _errorMessage = require('./error-message');\n\nvar _errorMessage2 = _interopRequireDefault(_errorMessage);\n\nvar _subtitle = require('./track/subtitle');\n\nvar _subtitle2 = _interopRequireDefault(_subtitle);\n\nvar _title = require('./title');\n\nvar _title2 = _interopRequireDefault(_title);\n\nvar _fragment = require('./fragment');\n\nvar _fragment2 = _interopRequireDefault(_fragment);\n\nvar _const = require('../utils/const');\n\nvar _video = require('../model/video');\n\nvar _fullscreen = require('../model/fullscreen');\n\nvar _playPause = require('../model/play-pause');\n\nvar _controlbar3 = require('../model/controlbar');\n\nvar _living = require('../model/living');\n\nvar _ready = require('../model/ready');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar View = (_dec = (0, _reactRedux.connect)(function (state) {\n  return {\n    living: state[_living.namespace],\n    isFull: state[_fullscreen.namespace],\n    playing: state[_playPause.namespace],\n    //controlbar的显示与否，代表了用户是否活跃\n    userActive: state[_controlbar3.namespace]\n  };\n}), _dec2 = (0, _clear2.default)([_video.namespace, _ready.namespace]), _dec(_class = _dec2(_class = (_temp2 = _class2 = function (_React$Component) {\n  (0, _inherits3.default)(View, _React$Component);\n\n  function View() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, View);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = View.__proto__ || (0, _getPrototypeOf2.default)(View)).call.apply(_ref, [this].concat(args))), _this), _this.outSideApi = {}, _this.state = {\n      //是否准备好，准备好就可以开始处理video的属性问题，就可以开始播放了\n      ready: false\n    }, _this.dispatch = _this.props.dispatch, _this.onDoubleClick = function (e) {\n      e.stopPropagation();\n      var _this$props = _this.props,\n          isFull = _this$props.isFull,\n          onDoubleClick = _this$props.onDoubleClick;\n      var flag = true;\n\n      if (onDoubleClick) {\n        var reFlag = onDoubleClick(e);\n\n        if (reFlag === false) {\n          //如果返回的是false，则处理flag，否则正常执行。\n          flag = false;\n        }\n      }\n\n      if (flag) {\n        _this.dispatch({\n          type: _video.namespace + '/fullscreen',\n          payload: !isFull\n        });\n      }\n    }, _this.onClick = function (e) {\n      e.stopPropagation();\n      var living = _this.props.living;\n\n      if (living) {\n        //直播不跟暂停播放\n        return;\n      }\n\n      var _this$props2 = _this.props,\n          playing = _this$props2.playing,\n          onClick = _this$props2.onClick;\n      var flag = true;\n\n      if (onClick) {\n        var reFlag = onClick(e);\n\n        if (reFlag === false) {\n          //如果返回的是false，则处理flag，否则正常执行。\n          flag = false;\n        }\n      } //如果flag不为true，不执行下面的操作\n\n\n      if (flag) {\n        if (playing) {\n          _this.dispatch({\n            type: _video.namespace + '/pause'\n          });\n        } else {\n          _this.dispatch({\n            type: _video.namespace + '/play'\n          });\n        }\n      }\n    }, _this.onMouseMove = function (e) {\n      var _this$props3 = _this.props,\n          _this$props3$controls = _this$props3.controls,\n          controls = _this$props3$controls === undefined ? true : _this$props3$controls,\n          playing = _this$props3.playing,\n          userActive = _this$props3.userActive,\n          _this$props3$controlb = _this$props3.controlbarHideTime,\n          controlbarHideTime = _this$props3$controlb === undefined ? _const.CONTROLBAR_HIDE_TIME : _this$props3$controlb;\n\n      if (controls && playing) {\n        //清理定时器，其他组件操作也可以处理当前组件的定时器，和video model中的定时器\n        _this.dispatch({\n          type: _video.namespace + '/controlbarClearTimeout'\n        });\n\n        _this.dispatchControlbar(false, controlbarHideTime);\n\n        if (!userActive) {\n          _this.dispatchControlbar(true);\n        }\n      }\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  } //这里的配置参考jw-player的api\n\n\n  (0, _createClass3.default)(View, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        api: this.api,\n        playerConainerDOM: this.playerConainerDOM,\n        localization: this.locale,\n        player: this.outSideApi,\n        playerDOM: _reactDom2.default.findDOMNode(this.refs.video),\n        controlbarHideTime: this.props.controlbarHideTime || _const.CONTROLBAR_HIDE_TIME,\n        leftSelectionComponent: this.props.leftSelectionComponent,\n        rightSelectionComponent: this.props.rightSelectionComponent\n      };\n    }\n  }, {\n    key: 'init',\n    value: function init(callback) {\n      var _this2 = this;\n\n      var videoDOM = _reactDom2.default.findDOMNode(this.refs.video);\n\n      this.videoDOM = videoDOM;\n      var _props = this.props,\n          _props$forceOpenHls = _props.forceOpenHls,\n          forceOpenHls = _props$forceOpenHls === undefined ? false : _props$forceOpenHls,\n          file = _props.file,\n          videoCallback = _props.videoCallback,\n          _props$preload = _props.preload,\n          preload = _props$preload === undefined ? true : _props$preload,\n          _props$spaceAction = _props.spaceAction,\n          spaceAction = _props$spaceAction === undefined ? true : _props$spaceAction,\n          _props$controlbarHide = _props.controlbarHideTime,\n          controlbarHideTime = _props$controlbarHide === undefined ? _const.CONTROLBAR_HIDE_TIME : _props$controlbarHide,\n          selection = _props.selection,\n          other = (0, _objectWithoutProperties3.default)(_props, ['forceOpenHls', 'file', 'videoCallback', 'preload', 'spaceAction', 'controlbarHideTime', 'selection']);\n\n      if (selection === true) {\n        selection = {};\n      }\n\n      if (!(0, _isString2.default)(file)) {\n        file = '';\n      }\n\n      file = util.urlProtocolAdapter(file);\n      var hlsjs = util.shouldUseHlsjs(file, forceOpenHls);\n      var flvjs = util.shouldUseFlvjs(file);\n      var videoNotSupport = false;\n\n      if (!hlsjs && !flvjs && !util.isH5VideoSupported(file)) {\n        //通过后缀名判断，没有后缀名不作处理，如果不支持原生的浏览器video格式，需要提示。\n        videoNotSupport = true;\n      }\n\n      (0, _loader2.default)((0, _extends3.default)({\n        hlsjs: hlsjs,\n        flvjs: flvjs,\n        videoDOM: videoDOM,\n        file: file,\n        localization: this.locale\n      }, other)).then(function (provider) {\n        //首先统一清理，可能会存在上一个的播放状态。\n        _this2.dispatch({\n          type: _video.namespace + '/clear'\n        });\n\n        if ((0, _isPlainObject2.default)(other.controls) && other.controls.capture) {\n          //屏幕截图功能需要设置crossorigin，safari和edge才不会报安全问题。\n          //但是有一个缺点，播放链接响应请求头必须设置跨域。\n          provider.api.setAttribute('crossorigin', 'anonymous');\n        }\n\n        _this2.api = provider.api;\n\n        _this2.dispatch({\n          type: _video.namespace + '/init',\n          payload: {\n            dispatch: _this2.dispatch,\n            config: (0, _extends3.default)({}, other, {\n              isHls: util.isM3u8File(file),\n              isFlv: util.isFlvFile(file),\n              videoNotSupport: videoNotSupport,\n              file: file,\n              selection: selection,\n              preload: preload,\n              controlbarHideTime: controlbarHideTime,\n              localization: _this2.locale,\n              spaceAction: spaceAction,\n              isHistory: _this2.context.isHistory,\n              setActiveItem: _this2.context.setActiveItem,\n              playlist: _this2.context.playlist,\n              historyDuration: _this2.context.historyDuration,\n              activeItem: _this2.context.activeItem,\n              reload: function reload(callback) {\n                _this2.initWithEvent(function () {\n                  callback && callback();\n\n                  _this2.setState({\n                    randomKey: util.randomKey()\n                  });\n                });\n              }\n            }),\n            api: provider.api,\n            hlsjsEvents: provider.hlsjsEvents,\n            videoCallback: videoCallback\n          },\n          initOverCallback: function initOverCallback(outSideApi) {\n            logger.success('Init Over:', 'initialized sucessfully,video is now playing(or can be played).');\n            _this2.outSideApi = outSideApi;\n\n            _this2.setState({\n              ready: true\n            });\n\n            callback && callback();\n          }\n        });\n      });\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.initWithEvent();\n    }\n  }, {\n    key: 'initWithEvent',\n    value: function initWithEvent() {\n      if (this.palyerMousemoveEvent) {\n        this.palyerMousemoveEvent.remove();\n      }\n\n      this.playerConainerDOM = _reactDom2.default.findDOMNode(this.refs['player-container']); //react jsx直接绑定事件在高德地图上mousemove失效，而下面的这种绑定方式不失效。\n\n      this.palyerMousemoveEvent = (0, _addEventListener2.default)(this.playerConainerDOM, 'mousemove', this.onMouseMove);\n      this.init();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.file !== prevProps.file) {\n        this.initWithEvent();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.palyerMousemoveEvent.remove();\n    }\n  }, {\n    key: 'dispatchControlbar',\n    value: function dispatchControlbar(payload, controlbarHideTime) {\n      this.dispatch({\n        type: _video.namespace + '/controlbar',\n        payload: payload,\n        delayTime: controlbarHideTime\n      });\n    }\n  }, {\n    key: 'getAspectratioNumber',\n    value: function getAspectratioNumber(aspectratio) {\n      var ratio = aspectratio.split(':');\n\n      if (ratio.length !== 2 || isNaN(ratio[0]) || isNaN(ratio[1])) {\n        logger.warn('Config error:', 'Aspectratio format is wrong,aspectratio format should be \"x:y\".');\n        aspectratio = _const.ASPECT_RATIO;\n        ratio = aspectratio.split(':');\n      }\n\n      return {\n        x: parseInt(ratio[0], 10),\n        y: parseInt(ratio[1], 10)\n      };\n    }\n  }, {\n    key: 'getContainerStyle',\n    value: function getContainerStyle() {\n      var _props2 = this.props,\n          _props2$aspectratio = _props2.aspectratio,\n          aspectratio = _props2$aspectratio === undefined ? _const.ASPECT_RATIO : _props2$aspectratio,\n          isFull = _props2.isFull,\n          height = _props2.height,\n          width = _props2.width,\n          style = _props2.style;\n      var containerStyle = {};\n\n      if (!isFull) {\n        if (width) {\n          containerStyle.width = width;\n        }\n\n        if (height) {\n          containerStyle.height = height;\n        }\n\n        if (width && !height && this.playerConainerDOM) {\n          //第二次渲染，执行在计算height之前\n          width = this.playerConainerDOM.clientWidth;\n        }\n\n        if ((0, _isNumber2.default)(width) && !height) {\n          //width是数字是才计算\n          var ratio = this.getAspectratioNumber(aspectratio);\n          containerStyle.height = width * ratio.y / ratio.x;\n        }\n\n        if (style) {\n          containerStyle = (0, _extends3.default)({}, containerStyle, style);\n        }\n      }\n\n      return containerStyle;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state = this.state,\n          ready = _state.ready,\n          randomKey = _state.randomKey;\n      var _props3 = this.props,\n          file = _props3.file,\n          autoplay = _props3.autoplay,\n          muted = _props3.muted,\n          _props3$controls = _props3.controls,\n          controls = _props3$controls === undefined ? true : _props3$controls,\n          poster = _props3.poster,\n          userActive = _props3.userActive,\n          _props3$tracks = _props3.tracks,\n          tracks = _props3$tracks === undefined ? [] : _props3$tracks,\n          className = _props3.className,\n          title = _props3.title,\n          playbackRates = _props3.playbackRates,\n          playbackRateControls = _props3.playbackRateControls,\n          logo = _props3.logo,\n          loop = _props3.loop,\n          _props3$contextMenu = _props3.contextMenu,\n          contextMenu = _props3$contextMenu === undefined ? true : _props3$contextMenu,\n          fragment = _props3.fragment,\n          isLiving = _props3.isLiving,\n          _props3$timeSliderSho = _props3.timeSliderShowFormat,\n          timeSliderShowFormat = _props3$timeSliderSho === undefined ? 'date' : _props3$timeSliderSho,\n          living = _props3.living,\n          _props3$stretching = _props3.stretching,\n          stretching = _props3$stretching === undefined ? 'uniform' : _props3$stretching,\n          selection = _props3.selection,\n          customTimeSlider = _props3.customTimeSlider,\n          LoadingMessageComponent = _props3.LoadingMessageComponent,\n          children = _props3.children;\n\n      if (selection && !this.context.isHistory) {\n        loop = true;\n      }\n\n      var locale = this.locale;\n      var containerStyle = this.getContainerStyle();\n      var videoProps = {};\n\n      if (ready) {\n        videoProps = {\n          onDoubleClick: this.onDoubleClick,\n          onClick: this.onClick,\n          poster: poster\n        };\n      }\n\n      return _react2.default.createElement(_contextmenu2.default, {\n        key: file + randomKey,\n        ref: 'player-container',\n        overflow: false,\n        content: _react2.default.createElement(_contextmenu4.default, {\n          content: contextMenu\n        })\n      }, _react2.default.createElement('div', {\n        className: (0, _classnames3.default)('html5-player-container', className, {\n          'cursor-none': !userActive\n        }),\n        style: containerStyle\n      }, !ready && _react2.default.createElement('span', {\n        className: 'html5-player-init-text'\n      }, locale.loadingPlayerText), _react2.default.createElement('video', (0, _extends3.default)({\n        loop: loop,\n        className: (0, _classnames3.default)('html5-player-tag', (0, _defineProperty3.default)({\n          'cursor-none': !userActive,\n          'cursor-pointer': !(isLiving || living)\n        }, 'html5-player-tag-stretching-' + stretching, true)),\n        ref: 'video'\n      }, videoProps)), _react2.default.createElement('div', {\n        //视频保护色，纯白的需要保护色\n        className: 'html5-player-pretect-bg'\n      }), ready && _react2.default.createElement('span', null, (0, _isString2.default)(logo) && _react2.default.createElement('img', {\n        className: 'html5-player-logo-container',\n        alt: '',\n        src: logo\n      }), _react2.default.isValidElement(logo) && _react2.default.createElement('div', {\n        className: 'html5-player-logo-container'\n      }, logo), (0, _isPlainObject2.default)(logo) && _react2.default.createElement('a', {\n        className: 'html5-player-logo-container',\n        href: logo.link || '',\n        target: logo.target || '__blank'\n      }, _react2.default.createElement('img', {\n        alt: '',\n        src: logo.image\n      })), _react2.default.createElement('span', null, title && _react2.default.createElement(_title2.default, {\n        title: title\n      }), _react2.default.createElement(_loading2.default, {\n        LoadingMessageComponent: LoadingMessageComponent\n      }), _react2.default.createElement(_end2.default, null), _react2.default.createElement(_errorMessage2.default, null), !autoplay && _react2.default.createElement(_notAutoplay2.default, null), controls && _react2.default.createElement(_controlbar2.default, {\n        tracks: tracks,\n        playbackRates: playbackRates,\n        playbackRateControls: playbackRateControls,\n        muted: muted,\n        controls: controls,\n        isLiving: isLiving,\n        timeSliderShowFormat: timeSliderShowFormat,\n        hasFragment: !!fragment,\n        customTimeSlider: customTimeSlider\n      }), _react2.default.createElement(_subtitle2.default, {\n        userActive: userActive\n      }), fragment && _react2.default.createElement(_fragment2.default, {\n        url: fragment\n      })), children)));\n    }\n  }, {\n    key: 'locale',\n    get: function get() {\n      return (0, _extends3.default)({}, _default2.default, this.props.localization);\n    }\n  }]);\n  return View;\n}(_react2.default.Component), _class2.propTypes = {\n  //播放的文件\n  file: _propTypes2.default.string.isRequired,\n  //播放开始之前要显示的海报图像的URL\n  poster: _propTypes2.default.string,\n  //播放器纵横比，默认为16:9，只有设置了宽度的情况下才会生效。\n  //格式为x:y\n  aspectratio: _propTypes2.default.string,\n  stretching: _propTypes2.default.string,\n\n  /**---begin Behavior**/\n  //静音\n  muted: _propTypes2.default.bool,\n  //preload=true，提前加载视频，false为不提前加载视频\n  //默认preload=true\n  //autoplay优先与preload\n  preload: _propTypes2.default.bool,\n  //自动播放\n  autoplay: _propTypes2.default.bool,\n  //设置默认开始播放的时间\n  defaultCurrentTime: _propTypes2.default.number,\n  //播完重复播放\n  loop: _propTypes2.default.bool,\n  //是否开启space按键暂停播放功能，默认开启\n  spaceAction: _propTypes2.default.bool,\n  //强制定义为直播\n  isLiving: _propTypes2.default.bool,\n  showLoadingLazyTime: _propTypes2.default.number,\n  //直播最大buffer\n  livingMaxBuffer: _propTypes2.default.number,\n  //自定义timeout时间\n  timeout: _propTypes2.default.number,\n  //尝试重连次数\n  retryTimes: _propTypes2.default.number,\n  //默认为time\n  timeSliderShowFormat: _propTypes2.default.string,\n\n  /**---end Behavior**/\n\n  /**---begin Appearance**/\n  //多语言\n  localization: _propTypes2.default.object,\n  //controlbar无操作后，多少毫秒隐藏时间\n  controlbarHideTime: _propTypes2.default.number,\n  controls: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.object]),\n  fragment: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  selection: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.object]),\n  leftSelectionComponent: _propTypes2.default.element,\n  rightSelectionComponent: _propTypes2.default.element,\n  height: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n\n  /**---end Appearance**/\n  tracks: _propTypes2.default.array,\n  playbackRates: _propTypes2.default.array,\n  playbackRateControls: _propTypes2.default.bool,\n  logo: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object, _propTypes2.default.element]),\n  LoadingMessageComponent: _propTypes2.default.element\n}, _class2.childContextTypes = {\n  api: _propTypes2.default.object,\n  playerConainerDOM: _propTypes2.default.object,\n  localization: _propTypes2.default.object,\n  //实例化后的player，可直接调用对外api，给使用者调用。\n  player: _propTypes2.default.object,\n  playerDOM: _propTypes2.default.object,\n  controlbarHideTime: _propTypes2.default.number,\n  leftSelectionComponent: _propTypes2.default.element,\n  rightSelectionComponent: _propTypes2.default.element\n}, _class2.contextTypes = {\n  isHistory: _propTypes2.default.bool,\n  setActiveItem: _propTypes2.default.func,\n  playlist: _propTypes2.default.array,\n  historyDuration: _propTypes2.default.number,\n  activeItem: _propTypes2.default.number\n}, _temp2)) || _class) || _class);\nexports.default = View;","map":{"version":3,"sources":["C:/Users/MaGent/Desktop/video/video/node_modules/html5-player/libs/view/index.js"],"names":["Object","defineProperty","exports","value","default","undefined","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_extends2","_extends3","_objectWithoutProperties2","_objectWithoutProperties3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_dec","_dec2","_class","_class2","_temp2","_react","_react2","_reactDom","_reactDom2","_propTypes","_propTypes2","_reactRedux","_classnames2","_classnames3","_isString","_isString2","_isNumber","_isNumber2","_isPlainObject","_isPlainObject2","_clear","_clear2","_loader","_loader2","_util","util","_interopRequireWildcard","_logger","logger","_addEventListener","_addEventListener2","_default","_default2","_contextmenu","_contextmenu2","_contextmenu3","_contextmenu4","_loading","_loading2","_end","_end2","_notAutoplay","_notAutoplay2","_controlbar","_controlbar2","_errorMessage","_errorMessage2","_subtitle","_subtitle2","_title","_title2","_fragment","_fragment2","_const","_video","_fullscreen","_playPause","_controlbar3","_living","_ready","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","View","connect","state","living","namespace","isFull","playing","userActive","_React$Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","apply","concat","outSideApi","ready","dispatch","props","onDoubleClick","e","stopPropagation","_this$props","flag","reFlag","type","payload","onClick","_this$props2","onMouseMove","_this$props3","_this$props3$controls","controls","_this$props3$controlb","controlbarHideTime","CONTROLBAR_HIDE_TIME","dispatchControlbar","getChildContext","api","playerConainerDOM","localization","locale","player","playerDOM","findDOMNode","refs","video","leftSelectionComponent","rightSelectionComponent","init","callback","_this2","videoDOM","_props","_props$forceOpenHls","forceOpenHls","file","videoCallback","_props$preload","preload","_props$spaceAction","spaceAction","_props$controlbarHide","selection","other","urlProtocolAdapter","hlsjs","shouldUseHlsjs","flvjs","shouldUseFlvjs","videoNotSupport","isH5VideoSupported","then","provider","capture","setAttribute","config","isHls","isM3u8File","isFlv","isFlvFile","isHistory","context","setActiveItem","playlist","historyDuration","activeItem","reload","initWithEvent","setState","randomKey","hlsjsEvents","initOverCallback","success","componentDidMount","palyerMousemoveEvent","remove","componentDidUpdate","prevProps","componentWillUnmount","delayTime","getAspectratioNumber","aspectratio","ratio","split","isNaN","warn","ASPECT_RATIO","x","parseInt","y","getContainerStyle","_props2","_props2$aspectratio","height","width","style","containerStyle","clientWidth","render","_state","_props3","autoplay","muted","_props3$controls","poster","_props3$tracks","tracks","className","title","playbackRates","playbackRateControls","logo","loop","_props3$contextMenu","contextMenu","fragment","isLiving","_props3$timeSliderSho","timeSliderShowFormat","_props3$stretching","stretching","customTimeSlider","LoadingMessageComponent","children","videoProps","createElement","ref","overflow","content","loadingPlayerText","alt","src","isValidElement","href","link","target","image","hasFragment","url","get","Component","propTypes","string","isRequired","bool","defaultCurrentTime","number","showLoadingLazyTime","livingMaxBuffer","timeout","retryTimes","object","oneOfType","element","array","childContextTypes","contextTypes","func"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _dec, _dec2, _class, _class2, _temp2; //外部依赖包\n\n//import classnames from 'classnames';\n//内部依赖包\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _classnames2 = require('classnames');\n\nvar _classnames3 = _interopRequireDefault(_classnames2);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _isNumber = require('lodash/isNumber');\n\nvar _isNumber2 = _interopRequireDefault(_isNumber);\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _clear = require('./decorator/clear');\n\nvar _clear2 = _interopRequireDefault(_clear);\n\nvar _loader = require('../loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nvar _util = require('../utils/util');\n\nvar util = _interopRequireWildcard(_util);\n\nvar _logger = require('../utils/logger');\n\nvar logger = _interopRequireWildcard(_logger);\n\nvar _addEventListener = require('../utils/dom/addEventListener');\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nvar _default = require('../i18n/default');\n\nvar _default2 = _interopRequireDefault(_default);\n\nvar _contextmenu = require('./components/contextmenu');\n\nvar _contextmenu2 = _interopRequireDefault(_contextmenu);\n\nvar _contextmenu3 = require('./contextmenu');\n\nvar _contextmenu4 = _interopRequireDefault(_contextmenu3);\n\nvar _loading = require('./loading');\n\nvar _loading2 = _interopRequireDefault(_loading);\n\nvar _end = require('./end');\n\nvar _end2 = _interopRequireDefault(_end);\n\nvar _notAutoplay = require('./not-autoplay');\n\nvar _notAutoplay2 = _interopRequireDefault(_notAutoplay);\n\nvar _controlbar = require('./controlbar');\n\nvar _controlbar2 = _interopRequireDefault(_controlbar);\n\nvar _errorMessage = require('./error-message');\n\nvar _errorMessage2 = _interopRequireDefault(_errorMessage);\n\nvar _subtitle = require('./track/subtitle');\n\nvar _subtitle2 = _interopRequireDefault(_subtitle);\n\nvar _title = require('./title');\n\nvar _title2 = _interopRequireDefault(_title);\n\nvar _fragment = require('./fragment');\n\nvar _fragment2 = _interopRequireDefault(_fragment);\n\nvar _const = require('../utils/const');\n\nvar _video = require('../model/video');\n\nvar _fullscreen = require('../model/fullscreen');\n\nvar _playPause = require('../model/play-pause');\n\nvar _controlbar3 = require('../model/controlbar');\n\nvar _living = require('../model/living');\n\nvar _ready = require('../model/ready');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar View = (_dec = (0, _reactRedux.connect)(function (state) {\n  return {\n    living: state[_living.namespace],\n    isFull: state[_fullscreen.namespace],\n    playing: state[_playPause.namespace],\n    //controlbar的显示与否，代表了用户是否活跃\n    userActive: state[_controlbar3.namespace]\n  };\n}), _dec2 = (0, _clear2.default)([_video.namespace, _ready.namespace]), _dec(_class = _dec2(_class = (_temp2 = _class2 = function (_React$Component) {\n  (0, _inherits3.default)(View, _React$Component);\n\n  function View() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, View);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = View.__proto__ || (0, _getPrototypeOf2.default)(View)).call.apply(_ref, [this].concat(args))), _this), _this.outSideApi = {}, _this.state = {\n      //是否准备好，准备好就可以开始处理video的属性问题，就可以开始播放了\n      ready: false\n    }, _this.dispatch = _this.props.dispatch, _this.onDoubleClick = function (e) {\n      e.stopPropagation();\n      var _this$props = _this.props,\n          isFull = _this$props.isFull,\n          onDoubleClick = _this$props.onDoubleClick;\n\n      var flag = true;\n      if (onDoubleClick) {\n        var reFlag = onDoubleClick(e);\n        if (reFlag === false) {\n          //如果返回的是false，则处理flag，否则正常执行。\n          flag = false;\n        }\n      }\n      if (flag) {\n        _this.dispatch({\n          type: _video.namespace + '/fullscreen',\n          payload: !isFull\n        });\n      }\n    }, _this.onClick = function (e) {\n      e.stopPropagation();\n      var living = _this.props.living;\n\n      if (living) {\n        //直播不跟暂停播放\n        return;\n      }\n      var _this$props2 = _this.props,\n          playing = _this$props2.playing,\n          onClick = _this$props2.onClick;\n\n      var flag = true;\n      if (onClick) {\n        var reFlag = onClick(e);\n        if (reFlag === false) {\n          //如果返回的是false，则处理flag，否则正常执行。\n          flag = false;\n        }\n      }\n      //如果flag不为true，不执行下面的操作\n      if (flag) {\n        if (playing) {\n          _this.dispatch({\n            type: _video.namespace + '/pause'\n          });\n        } else {\n          _this.dispatch({\n            type: _video.namespace + '/play'\n          });\n        }\n      }\n    }, _this.onMouseMove = function (e) {\n      var _this$props3 = _this.props,\n          _this$props3$controls = _this$props3.controls,\n          controls = _this$props3$controls === undefined ? true : _this$props3$controls,\n          playing = _this$props3.playing,\n          userActive = _this$props3.userActive,\n          _this$props3$controlb = _this$props3.controlbarHideTime,\n          controlbarHideTime = _this$props3$controlb === undefined ? _const.CONTROLBAR_HIDE_TIME : _this$props3$controlb;\n\n      if (controls && playing) {\n        //清理定时器，其他组件操作也可以处理当前组件的定时器，和video model中的定时器\n        _this.dispatch({\n          type: _video.namespace + '/controlbarClearTimeout'\n        });\n        _this.dispatchControlbar(false, controlbarHideTime);\n        if (!userActive) {\n          _this.dispatchControlbar(true);\n        }\n      }\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n  //这里的配置参考jw-player的api\n\n\n  (0, _createClass3.default)(View, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        api: this.api,\n        playerConainerDOM: this.playerConainerDOM,\n        localization: this.locale,\n        player: this.outSideApi,\n        playerDOM: _reactDom2.default.findDOMNode(this.refs.video),\n        controlbarHideTime: this.props.controlbarHideTime || _const.CONTROLBAR_HIDE_TIME,\n        leftSelectionComponent: this.props.leftSelectionComponent,\n        rightSelectionComponent: this.props.rightSelectionComponent\n      };\n    }\n  }, {\n    key: 'init',\n    value: function init(callback) {\n      var _this2 = this;\n\n      var videoDOM = _reactDom2.default.findDOMNode(this.refs.video);\n      this.videoDOM = videoDOM;\n      var _props = this.props,\n          _props$forceOpenHls = _props.forceOpenHls,\n          forceOpenHls = _props$forceOpenHls === undefined ? false : _props$forceOpenHls,\n          file = _props.file,\n          videoCallback = _props.videoCallback,\n          _props$preload = _props.preload,\n          preload = _props$preload === undefined ? true : _props$preload,\n          _props$spaceAction = _props.spaceAction,\n          spaceAction = _props$spaceAction === undefined ? true : _props$spaceAction,\n          _props$controlbarHide = _props.controlbarHideTime,\n          controlbarHideTime = _props$controlbarHide === undefined ? _const.CONTROLBAR_HIDE_TIME : _props$controlbarHide,\n          selection = _props.selection,\n          other = (0, _objectWithoutProperties3.default)(_props, ['forceOpenHls', 'file', 'videoCallback', 'preload', 'spaceAction', 'controlbarHideTime', 'selection']);\n\n\n      if (selection === true) {\n        selection = {};\n      }\n      if (!(0, _isString2.default)(file)) {\n        file = '';\n      }\n      file = util.urlProtocolAdapter(file);\n      var hlsjs = util.shouldUseHlsjs(file, forceOpenHls);\n      var flvjs = util.shouldUseFlvjs(file);\n      var videoNotSupport = false;\n      if (!hlsjs && !flvjs && !util.isH5VideoSupported(file)) {\n        //通过后缀名判断，没有后缀名不作处理，如果不支持原生的浏览器video格式，需要提示。\n        videoNotSupport = true;\n      }\n      (0, _loader2.default)((0, _extends3.default)({\n        hlsjs: hlsjs,\n        flvjs: flvjs,\n        videoDOM: videoDOM,\n        file: file,\n        localization: this.locale\n      }, other)).then(function (provider) {\n        //首先统一清理，可能会存在上一个的播放状态。\n        _this2.dispatch({\n          type: _video.namespace + '/clear'\n        });\n        if ((0, _isPlainObject2.default)(other.controls) && other.controls.capture) {\n          //屏幕截图功能需要设置crossorigin，safari和edge才不会报安全问题。\n          //但是有一个缺点，播放链接响应请求头必须设置跨域。\n          provider.api.setAttribute('crossorigin', 'anonymous');\n        }\n        _this2.api = provider.api;\n        _this2.dispatch({\n          type: _video.namespace + '/init',\n          payload: {\n            dispatch: _this2.dispatch,\n            config: (0, _extends3.default)({}, other, {\n              isHls: util.isM3u8File(file),\n              isFlv: util.isFlvFile(file),\n              videoNotSupport: videoNotSupport,\n              file: file,\n              selection: selection,\n              preload: preload,\n              controlbarHideTime: controlbarHideTime,\n              localization: _this2.locale,\n              spaceAction: spaceAction,\n              isHistory: _this2.context.isHistory,\n              setActiveItem: _this2.context.setActiveItem,\n              playlist: _this2.context.playlist,\n              historyDuration: _this2.context.historyDuration,\n              activeItem: _this2.context.activeItem,\n              reload: function reload(callback) {\n                _this2.initWithEvent(function () {\n                  callback && callback();\n                  _this2.setState({\n                    randomKey: util.randomKey()\n                  });\n                });\n              }\n            }),\n            api: provider.api,\n            hlsjsEvents: provider.hlsjsEvents,\n            videoCallback: videoCallback\n          },\n          initOverCallback: function initOverCallback(outSideApi) {\n            logger.success('Init Over:', 'initialized sucessfully,video is now playing(or can be played).');\n            _this2.outSideApi = outSideApi;\n            _this2.setState({\n              ready: true\n            });\n            callback && callback();\n          }\n        });\n      });\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.initWithEvent();\n    }\n  }, {\n    key: 'initWithEvent',\n    value: function initWithEvent() {\n      if (this.palyerMousemoveEvent) {\n        this.palyerMousemoveEvent.remove();\n      }\n      this.playerConainerDOM = _reactDom2.default.findDOMNode(this.refs['player-container']);\n      //react jsx直接绑定事件在高德地图上mousemove失效，而下面的这种绑定方式不失效。\n      this.palyerMousemoveEvent = (0, _addEventListener2.default)(this.playerConainerDOM, 'mousemove', this.onMouseMove);\n      this.init();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.file !== prevProps.file) {\n        this.initWithEvent();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.palyerMousemoveEvent.remove();\n    }\n  }, {\n    key: 'dispatchControlbar',\n    value: function dispatchControlbar(payload, controlbarHideTime) {\n      this.dispatch({\n        type: _video.namespace + '/controlbar',\n        payload: payload,\n        delayTime: controlbarHideTime\n      });\n    }\n  }, {\n    key: 'getAspectratioNumber',\n    value: function getAspectratioNumber(aspectratio) {\n      var ratio = aspectratio.split(':');\n      if (ratio.length !== 2 || isNaN(ratio[0]) || isNaN(ratio[1])) {\n        logger.warn('Config error:', 'Aspectratio format is wrong,aspectratio format should be \"x:y\".');\n        aspectratio = _const.ASPECT_RATIO;\n        ratio = aspectratio.split(':');\n      }\n      return {\n        x: parseInt(ratio[0], 10),\n        y: parseInt(ratio[1], 10)\n      };\n    }\n  }, {\n    key: 'getContainerStyle',\n    value: function getContainerStyle() {\n      var _props2 = this.props,\n          _props2$aspectratio = _props2.aspectratio,\n          aspectratio = _props2$aspectratio === undefined ? _const.ASPECT_RATIO : _props2$aspectratio,\n          isFull = _props2.isFull,\n          height = _props2.height,\n          width = _props2.width,\n          style = _props2.style;\n\n      var containerStyle = {};\n      if (!isFull) {\n        if (width) {\n          containerStyle.width = width;\n        }\n        if (height) {\n          containerStyle.height = height;\n        }\n        if (width && !height && this.playerConainerDOM) {\n          //第二次渲染，执行在计算height之前\n          width = this.playerConainerDOM.clientWidth;\n        }\n        if ((0, _isNumber2.default)(width) && !height) {\n          //width是数字是才计算\n          var ratio = this.getAspectratioNumber(aspectratio);\n          containerStyle.height = width * ratio.y / ratio.x;\n        }\n        if (style) {\n          containerStyle = (0, _extends3.default)({}, containerStyle, style);\n        }\n      }\n      return containerStyle;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _state = this.state,\n          ready = _state.ready,\n          randomKey = _state.randomKey;\n      var _props3 = this.props,\n          file = _props3.file,\n          autoplay = _props3.autoplay,\n          muted = _props3.muted,\n          _props3$controls = _props3.controls,\n          controls = _props3$controls === undefined ? true : _props3$controls,\n          poster = _props3.poster,\n          userActive = _props3.userActive,\n          _props3$tracks = _props3.tracks,\n          tracks = _props3$tracks === undefined ? [] : _props3$tracks,\n          className = _props3.className,\n          title = _props3.title,\n          playbackRates = _props3.playbackRates,\n          playbackRateControls = _props3.playbackRateControls,\n          logo = _props3.logo,\n          loop = _props3.loop,\n          _props3$contextMenu = _props3.contextMenu,\n          contextMenu = _props3$contextMenu === undefined ? true : _props3$contextMenu,\n          fragment = _props3.fragment,\n          isLiving = _props3.isLiving,\n          _props3$timeSliderSho = _props3.timeSliderShowFormat,\n          timeSliderShowFormat = _props3$timeSliderSho === undefined ? 'date' : _props3$timeSliderSho,\n          living = _props3.living,\n          _props3$stretching = _props3.stretching,\n          stretching = _props3$stretching === undefined ? 'uniform' : _props3$stretching,\n          selection = _props3.selection,\n          customTimeSlider = _props3.customTimeSlider,\n          LoadingMessageComponent = _props3.LoadingMessageComponent,\n          children = _props3.children;\n\n      if (selection && !this.context.isHistory) {\n        loop = true;\n      }\n      var locale = this.locale;\n      var containerStyle = this.getContainerStyle();\n      var videoProps = {};\n      if (ready) {\n        videoProps = {\n          onDoubleClick: this.onDoubleClick,\n          onClick: this.onClick,\n          poster: poster\n        };\n      }\n      return _react2.default.createElement(\n        _contextmenu2.default,\n        {\n          key: file + randomKey,\n          ref: 'player-container',\n          overflow: false,\n          content: _react2.default.createElement(_contextmenu4.default, { content: contextMenu })\n        },\n        _react2.default.createElement(\n          'div',\n          {\n            className: (0, _classnames3.default)('html5-player-container', className, {\n              'cursor-none': !userActive\n            }),\n            style: containerStyle\n          },\n          !ready && _react2.default.createElement(\n            'span',\n            { className: 'html5-player-init-text' },\n            locale.loadingPlayerText\n          ),\n          _react2.default.createElement('video', (0, _extends3.default)({\n            loop: loop,\n            className: (0, _classnames3.default)('html5-player-tag', (0, _defineProperty3.default)({\n              'cursor-none': !userActive,\n              'cursor-pointer': !(isLiving || living)\n            }, 'html5-player-tag-stretching-' + stretching, true)),\n            ref: 'video'\n          }, videoProps)),\n          _react2.default.createElement('div', {\n            //视频保护色，纯白的需要保护色\n            className: 'html5-player-pretect-bg'\n          }),\n          ready && _react2.default.createElement(\n            'span',\n            null,\n            (0, _isString2.default)(logo) && _react2.default.createElement('img', {\n              className: 'html5-player-logo-container',\n              alt: '',\n              src: logo\n            }),\n            _react2.default.isValidElement(logo) && _react2.default.createElement(\n              'div',\n              { className: 'html5-player-logo-container' },\n              logo\n            ),\n            (0, _isPlainObject2.default)(logo) && _react2.default.createElement(\n              'a',\n              {\n                className: 'html5-player-logo-container',\n                href: logo.link || '',\n                target: logo.target || '__blank'\n              },\n              _react2.default.createElement('img', { alt: '', src: logo.image })\n            ),\n            _react2.default.createElement(\n              'span',\n              null,\n              title && _react2.default.createElement(_title2.default, { title: title }),\n              _react2.default.createElement(_loading2.default, { LoadingMessageComponent: LoadingMessageComponent }),\n              _react2.default.createElement(_end2.default, null),\n              _react2.default.createElement(_errorMessage2.default, null),\n              !autoplay && _react2.default.createElement(_notAutoplay2.default, null),\n              controls && _react2.default.createElement(_controlbar2.default, {\n                tracks: tracks,\n                playbackRates: playbackRates,\n                playbackRateControls: playbackRateControls,\n                muted: muted,\n                controls: controls,\n                isLiving: isLiving,\n                timeSliderShowFormat: timeSliderShowFormat,\n                hasFragment: !!fragment,\n                customTimeSlider: customTimeSlider\n              }),\n              _react2.default.createElement(_subtitle2.default, { userActive: userActive }),\n              fragment && _react2.default.createElement(_fragment2.default, { url: fragment })\n            ),\n            children\n          )\n        )\n      );\n    }\n  }, {\n    key: 'locale',\n    get: function get() {\n      return (0, _extends3.default)({}, _default2.default, this.props.localization);\n    }\n  }]);\n  return View;\n}(_react2.default.Component), _class2.propTypes = {\n  //播放的文件\n  file: _propTypes2.default.string.isRequired,\n  //播放开始之前要显示的海报图像的URL\n  poster: _propTypes2.default.string,\n  //播放器纵横比，默认为16:9，只有设置了宽度的情况下才会生效。\n  //格式为x:y\n  aspectratio: _propTypes2.default.string,\n  stretching: _propTypes2.default.string,\n  /**---begin Behavior**/\n  //静音\n  muted: _propTypes2.default.bool,\n  //preload=true，提前加载视频，false为不提前加载视频\n  //默认preload=true\n  //autoplay优先与preload\n  preload: _propTypes2.default.bool,\n  //自动播放\n  autoplay: _propTypes2.default.bool,\n  //设置默认开始播放的时间\n  defaultCurrentTime: _propTypes2.default.number,\n  //播完重复播放\n  loop: _propTypes2.default.bool,\n  //是否开启space按键暂停播放功能，默认开启\n  spaceAction: _propTypes2.default.bool,\n  //强制定义为直播\n  isLiving: _propTypes2.default.bool,\n  showLoadingLazyTime: _propTypes2.default.number,\n  //直播最大buffer\n  livingMaxBuffer: _propTypes2.default.number,\n  //自定义timeout时间\n  timeout: _propTypes2.default.number,\n  //尝试重连次数\n  retryTimes: _propTypes2.default.number,\n  //默认为time\n  timeSliderShowFormat: _propTypes2.default.string,\n  /**---end Behavior**/\n  /**---begin Appearance**/\n  //多语言\n  localization: _propTypes2.default.object,\n  //controlbar无操作后，多少毫秒隐藏时间\n  controlbarHideTime: _propTypes2.default.number,\n  controls: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.object]),\n  fragment: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  selection: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.object]),\n  leftSelectionComponent: _propTypes2.default.element,\n  rightSelectionComponent: _propTypes2.default.element,\n  height: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  /**---end Appearance**/\n  tracks: _propTypes2.default.array,\n  playbackRates: _propTypes2.default.array,\n  playbackRateControls: _propTypes2.default.bool,\n  logo: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object, _propTypes2.default.element]),\n  LoadingMessageComponent: _propTypes2.default.element\n}, _class2.childContextTypes = {\n  api: _propTypes2.default.object,\n  playerConainerDOM: _propTypes2.default.object,\n  localization: _propTypes2.default.object,\n  //实例化后的player，可直接调用对外api，给使用者调用。\n  player: _propTypes2.default.object,\n  playerDOM: _propTypes2.default.object,\n  controlbarHideTime: _propTypes2.default.number,\n  leftSelectionComponent: _propTypes2.default.element,\n  rightSelectionComponent: _propTypes2.default.element\n}, _class2.contextTypes = {\n  isHistory: _propTypes2.default.bool,\n  setActiveItem: _propTypes2.default.func,\n  playlist: _propTypes2.default.array,\n  historyDuration: _propTypes2.default.number,\n  activeItem: _propTypes2.default.number\n}, _temp2)) || _class) || _class);\nexports.default = View;"]},"metadata":{},"sourceType":"script"}