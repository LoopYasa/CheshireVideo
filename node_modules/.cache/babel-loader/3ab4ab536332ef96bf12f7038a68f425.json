{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _dec, _dec2, _class, _class2, _temp2; //外部依赖包\n//内部依赖包\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _clear = require('../../decorator/clear');\n\nvar _clear2 = _interopRequireDefault(_clear);\n\nvar _slider = require('../../components/slider');\n\nvar _slider2 = _interopRequireDefault(_slider);\n\nvar _timeTooltip = require('../../controlbar/time-tooltip');\n\nvar _timeTooltip2 = _interopRequireDefault(_timeTooltip);\n\nvar _selection = require('./selection');\n\nvar _selection2 = _interopRequireDefault(_selection);\n\nvar _video = require('../../../model/video');\n\nvar _timeSlider = require('../../../model/time-slider');\n\nvar _fragment = require('../../../model/fragment');\n\nvar _selection3 = require('../../../model/selection');\n\nvar _errorMessage = require('../../../model/error-message');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * 播放器加载状态的组件\n */\n\n\nvar TimeSlider = (_dec = (0, _reactRedux.connect)(function (state) {\n  return {\n    sliderModel: state[_timeSlider.namespace],\n    fragment: state[_fragment.namespace],\n    selection: state[_selection3.namespace],\n    isError: !!state[_errorMessage.namespace].message\n  };\n}), _dec2 = (0, _clear2.default)([_timeSlider.namespace]), _dec(_class = _dec2(_class = (_temp2 = _class2 = function (_React$Component) {\n  (0, _inherits3.default)(TimeSlider, _React$Component);\n\n  function TimeSlider() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, TimeSlider);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = TimeSlider.__proto__ || (0, _getPrototypeOf2.default)(TimeSlider)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.dispatch = _this.props.dispatch, _this.onSliderChange = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/seeking',\n        payload: {\n          percent: percent\n        }\n      });\n    }, _this.onMouseDown = function (e) {\n      _this.dispatch({\n        type: _video.namespace + '/seekingState',\n        payload: true\n      });\n    }, _this.onMouseUp = function (e) {\n      _this.dispatch({\n        type: _video.namespace + '/seekingState',\n        payload: false\n      });\n    }, _this.onLeftSelectionBlur = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/selection',\n        payload: {\n          type: 'left-blur',\n          percent: percent\n        }\n      });\n    }, _this.onLeftSelectionChange = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/selection',\n        payload: {\n          type: 'left-change',\n          percent: percent\n        }\n      });\n    }, _this.onRightSelectionChange = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/selection',\n        payload: {\n          type: 'right-change',\n          percent: percent\n        }\n      });\n    }, _this.onRightSelectionBlur = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/selection',\n        payload: {\n          type: 'right-blur',\n          percent: percent\n        }\n      });\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(TimeSlider, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        timeSliderDOM: this.timeSliderDOM\n      };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.timeSliderDOM = _reactDom2.default.findDOMNode(this.refs.slider);\n    }\n  }, {\n    key: 'renderSelection',\n\n    /**\n     * 在有fragment的前提下，渲染可以选择播放的操作按钮\n     */\n    value: function renderSelection() {\n      var _props = this.props,\n          _props$selection = _props.selection,\n          begin = _props$selection.begin,\n          end = _props$selection.end,\n          fragment = _props.fragment;\n\n      if (end > fragment.duration) {\n        end = fragment.duration;\n      }\n\n      var leftPercent = begin / fragment.duration;\n      var rightPercent = end / fragment.duration;\n      return _react2.default.createElement('span', {\n        className: 'html5-player-selection-container'\n      }, _react2.default.createElement(_selection2.default, {\n        className: 'html5-player-selection-left',\n        percent: leftPercent,\n        onBlur: this.onLeftSelectionBlur,\n        onChange: this.onLeftSelectionChange\n      }, this.context.leftSelectionComponent), _react2.default.createElement(_selection2.default, {\n        percent: rightPercent,\n        className: 'html5-player-selection-right',\n        onChange: this.onRightSelectionChange,\n        onBlur: this.onRightSelectionBlur\n      }, this.context.rightSelectionComponent));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props2 = this.props,\n          sliderModel = _props2.sliderModel,\n          fragment = _props2.fragment,\n          timeSliderShowFormat = _props2.timeSliderShowFormat,\n          hasFragment = _props2.hasFragment,\n          selection = _props2.selection,\n          isError = _props2.isError;\n      var percent = sliderModel.percent,\n          buffer = sliderModel.buffer;\n      var bufferStyle = {};\n\n      if (buffer) {\n        bufferStyle.width = buffer * 100 + '%';\n      }\n\n      if (isError) {\n        return false;\n      }\n\n      return _react2.default.createElement(_slider2.default, {\n        ref: 'slider',\n        onChange: this.onSliderChange,\n        percent: fragment.percent || percent,\n        padding: '0 10px',\n        className: (0, _classnames2.default)('html5-player-time-slider', {\n          'html5-player-track-history-slider': hasFragment\n        }),\n        onMouseDown: this.onMouseDown,\n        onMouseUp: this.onMouseUp,\n        onlyShowCircleOnEnter: true\n      }, fragment && selection && this.renderSelection(), fragment && fragment.data && fragment.data.map(function (v, k) {\n        var width = v.gap / fragment.duration * 100 + '%';\n        var left = v.begin / fragment.duration * 100 + '%';\n        var style = {\n          left: left,\n          width: width\n        };\n        return _react2.default.createElement('div', {\n          key: k,\n          className: 'html5-player-broken',\n          style: style\n        });\n      }), _react2.default.createElement('div', {\n        className: 'html5-player-buffer',\n        style: bufferStyle\n      }), _react2.default.createElement(_timeTooltip2.default, {\n        timeSliderShowFormat: timeSliderShowFormat\n      }));\n    }\n  }]);\n  return TimeSlider;\n}(_react2.default.Component), _class2.propTypes = {}, _class2.displayName = 'TimeSlider', _class2.contextTypes = {\n  leftSelectionComponent: _propTypes2.default.element,\n  rightSelectionComponent: _propTypes2.default.element\n}, _class2.childContextTypes = {\n  timeSliderDOM: _propTypes2.default.object\n}, _temp2)) || _class) || _class);\nexports.default = TimeSlider;","map":{"version":3,"sources":["C:/Users/MaGent/Desktop/video/video/node_modules/html5-player/libs/view/controlbar/time-slider/index.js"],"names":["Object","defineProperty","exports","value","default","undefined","_getPrototypeOf","require","_getPrototypeOf2","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_dec","_dec2","_class","_class2","_temp2","_react","_react2","_reactDom","_reactDom2","_propTypes","_propTypes2","_reactRedux","_classnames","_classnames2","_clear","_clear2","_slider","_slider2","_timeTooltip","_timeTooltip2","_selection","_selection2","_video","_timeSlider","_fragment","_selection3","_errorMessage","obj","__esModule","TimeSlider","connect","state","sliderModel","namespace","fragment","selection","isError","message","_React$Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","call","apply","concat","dispatch","props","onSliderChange","percent","type","payload","onMouseDown","e","onMouseUp","onLeftSelectionBlur","onLeftSelectionChange","onRightSelectionChange","onRightSelectionBlur","key","getChildContext","timeSliderDOM","componentDidMount","findDOMNode","refs","slider","renderSelection","_props","_props$selection","begin","end","duration","leftPercent","rightPercent","createElement","className","onBlur","onChange","context","leftSelectionComponent","rightSelectionComponent","render","_props2","timeSliderShowFormat","hasFragment","buffer","bufferStyle","width","ref","padding","onlyShowCircleOnEnter","data","map","v","k","gap","left","style","Component","propTypes","displayName","contextTypes","element","childContextTypes","object"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _dec, _dec2, _class, _class2, _temp2; //外部依赖包\n\n//内部依赖包\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _clear = require('../../decorator/clear');\n\nvar _clear2 = _interopRequireDefault(_clear);\n\nvar _slider = require('../../components/slider');\n\nvar _slider2 = _interopRequireDefault(_slider);\n\nvar _timeTooltip = require('../../controlbar/time-tooltip');\n\nvar _timeTooltip2 = _interopRequireDefault(_timeTooltip);\n\nvar _selection = require('./selection');\n\nvar _selection2 = _interopRequireDefault(_selection);\n\nvar _video = require('../../../model/video');\n\nvar _timeSlider = require('../../../model/time-slider');\n\nvar _fragment = require('../../../model/fragment');\n\nvar _selection3 = require('../../../model/selection');\n\nvar _errorMessage = require('../../../model/error-message');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * 播放器加载状态的组件\n */\nvar TimeSlider = (_dec = (0, _reactRedux.connect)(function (state) {\n  return {\n    sliderModel: state[_timeSlider.namespace],\n    fragment: state[_fragment.namespace],\n    selection: state[_selection3.namespace],\n    isError: !!state[_errorMessage.namespace].message\n  };\n}), _dec2 = (0, _clear2.default)([_timeSlider.namespace]), _dec(_class = _dec2(_class = (_temp2 = _class2 = function (_React$Component) {\n  (0, _inherits3.default)(TimeSlider, _React$Component);\n\n  function TimeSlider() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, TimeSlider);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = TimeSlider.__proto__ || (0, _getPrototypeOf2.default)(TimeSlider)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.dispatch = _this.props.dispatch, _this.onSliderChange = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/seeking',\n        payload: {\n          percent: percent\n        }\n      });\n    }, _this.onMouseDown = function (e) {\n      _this.dispatch({\n        type: _video.namespace + '/seekingState',\n        payload: true\n      });\n    }, _this.onMouseUp = function (e) {\n      _this.dispatch({\n        type: _video.namespace + '/seekingState',\n        payload: false\n      });\n    }, _this.onLeftSelectionBlur = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/selection',\n        payload: {\n          type: 'left-blur',\n          percent: percent\n        }\n      });\n    }, _this.onLeftSelectionChange = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/selection',\n        payload: {\n          type: 'left-change',\n          percent: percent\n        }\n      });\n    }, _this.onRightSelectionChange = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/selection',\n        payload: {\n          type: 'right-change',\n          percent: percent\n        }\n      });\n    }, _this.onRightSelectionBlur = function (percent) {\n      _this.dispatch({\n        type: _video.namespace + '/selection',\n        payload: {\n          type: 'right-blur',\n          percent: percent\n        }\n      });\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(TimeSlider, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        timeSliderDOM: this.timeSliderDOM\n      };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.timeSliderDOM = _reactDom2.default.findDOMNode(this.refs.slider);\n    }\n  }, {\n    key: 'renderSelection',\n\n    /**\n     * 在有fragment的前提下，渲染可以选择播放的操作按钮\n     */\n    value: function renderSelection() {\n      var _props = this.props,\n          _props$selection = _props.selection,\n          begin = _props$selection.begin,\n          end = _props$selection.end,\n          fragment = _props.fragment;\n\n      if (end > fragment.duration) {\n        end = fragment.duration;\n      }\n      var leftPercent = begin / fragment.duration;\n      var rightPercent = end / fragment.duration;\n      return _react2.default.createElement(\n        'span',\n        { className: 'html5-player-selection-container' },\n        _react2.default.createElement(\n          _selection2.default,\n          {\n            className: 'html5-player-selection-left',\n            percent: leftPercent,\n            onBlur: this.onLeftSelectionBlur,\n            onChange: this.onLeftSelectionChange\n          },\n          this.context.leftSelectionComponent\n        ),\n        _react2.default.createElement(\n          _selection2.default,\n          {\n            percent: rightPercent,\n            className: 'html5-player-selection-right',\n            onChange: this.onRightSelectionChange,\n            onBlur: this.onRightSelectionBlur\n          },\n          this.context.rightSelectionComponent\n        )\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props2 = this.props,\n          sliderModel = _props2.sliderModel,\n          fragment = _props2.fragment,\n          timeSliderShowFormat = _props2.timeSliderShowFormat,\n          hasFragment = _props2.hasFragment,\n          selection = _props2.selection,\n          isError = _props2.isError;\n      var percent = sliderModel.percent,\n          buffer = sliderModel.buffer;\n\n      var bufferStyle = {};\n      if (buffer) {\n        bufferStyle.width = buffer * 100 + '%';\n      }\n      if (isError) {\n        return false;\n      }\n      return _react2.default.createElement(\n        _slider2.default,\n        {\n          ref: 'slider',\n          onChange: this.onSliderChange,\n          percent: fragment.percent || percent,\n          padding: '0 10px',\n          className: (0, _classnames2.default)('html5-player-time-slider', {\n            'html5-player-track-history-slider': hasFragment\n          }),\n          onMouseDown: this.onMouseDown,\n          onMouseUp: this.onMouseUp,\n          onlyShowCircleOnEnter: true\n        },\n        fragment && selection && this.renderSelection(),\n        fragment && fragment.data && fragment.data.map(function (v, k) {\n          var width = v.gap / fragment.duration * 100 + '%';\n          var left = v.begin / fragment.duration * 100 + '%';\n          var style = {\n            left: left,\n            width: width\n          };\n          return _react2.default.createElement('div', { key: k, className: 'html5-player-broken', style: style });\n        }),\n        _react2.default.createElement('div', { className: 'html5-player-buffer', style: bufferStyle }),\n        _react2.default.createElement(_timeTooltip2.default, { timeSliderShowFormat: timeSliderShowFormat })\n      );\n    }\n  }]);\n  return TimeSlider;\n}(_react2.default.Component), _class2.propTypes = {}, _class2.displayName = 'TimeSlider', _class2.contextTypes = {\n  leftSelectionComponent: _propTypes2.default.element,\n  rightSelectionComponent: _propTypes2.default.element\n}, _class2.childContextTypes = {\n  timeSliderDOM: _propTypes2.default.object\n}, _temp2)) || _class) || _class);\nexports.default = TimeSlider;"]},"metadata":{},"sourceType":"script"}