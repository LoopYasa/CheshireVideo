{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nexports.chunkLoadErrorHandler = chunkLoadErrorHandler;\nexports.default = selectBundle;\n\nvar _logger = require('./utils/logger');\n\nvar logger = _interopRequireWildcard(_logger);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction chunkLoadErrorHandler(error) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'h5'; // Webpack require.ensure error: \"Loading chunk 3 failed\"\n\n  logger.error('Module Loaded:', 'relative module loaded failed.');\n  throw error;\n} //通过配置判断载入的文件\n\n\nfunction selectBundle() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var bundle = void 0;\n\n  if (config.hlsjs) {\n    bundle = loadHlsJsBundle(config);\n  } else if (config.flvjs) {\n    bundle = loadFlvJsBundle(config);\n  } else {\n    bundle = loadHtml5Bundle(config);\n  }\n\n  return bundle;\n}\n\nfunction loadFlvJsBundle(config) {\n  return new _promise2.default(function (resolve) {\n    require.ensure(['flv.ly.js/dist/flv.js', './api/flvjs-api'], function (require) {\n      var flvjs = require('flv.ly.js/dist/flv.js');\n\n      logger.success('Module Loaded:', 'relative flv.js module loaded sucessfully.');\n\n      var apiClass = require('./api/flvjs-api').default;\n\n      apiClass.prototype.localization = config.localization;\n\n      if (config.flvConfig && config.flvConfig.enableWorker) {\n        //worker，多线程多线程转换流，减少延时（2秒左右）\n        config.flvConfig = (0, _extends3.default)({}, config.flvConfig, {\n          enableWorker: true,\n          // lazyLoad: false,\n          //Indicates how many seconds of data to be kept for lazyLoad.\n          // lazyLoadMaxDuration: 0,\n          // autoCleanupMaxBackwardDuration: 3,\n          // autoCleanupMinBackwardDuration: 2,\n          // autoCleanupSourceBuffer: true,\n          enableStashBuffer: false,\n          stashInitialSize: 128,\n          isLive: true\n        });\n      }\n\n      var api = new apiClass(config.videoDOM, config.file, flvjs, config.flvConfig);\n      resolve({\n        flvjs: flvjs,\n        api: api\n      });\n    }, chunkLoadErrorHandler, 'provider.flvjs');\n  });\n}\n\nfunction loadHlsJsBundle(config) {\n  return new _promise2.default(function (resolve) {\n    require.ensure(['hls.js', './api/hlsjs-api', './model/video/events/hlsjs'], function (require) {\n      var hlsjs = require('hls.js');\n\n      logger.success('Module Loaded:', 'relative hls.js module loaded sucessfully.');\n\n      var apiClass = require('./api/hlsjs-api').default;\n\n      apiClass.prototype.localization = config.localization;\n      var api = new apiClass(config.videoDOM, config.file, hlsjs);\n\n      var hlsjsEvents = require('./model/video/events/hlsjs').default;\n\n      resolve({\n        hlsjs: hlsjs,\n        api: api,\n        hlsjsEvents: hlsjsEvents\n      });\n    }, chunkLoadErrorHandler, 'provider.hlsjs');\n  });\n}\n\nfunction loadHtml5Bundle(config) {\n  return new _promise2.default(function (resolve) {\n    var apiClass = require('./api/html5-api').default;\n\n    apiClass.prototype.localization = config.localization;\n    var api = new apiClass(config.videoDOM, config.file);\n    resolve({\n      api: api\n    });\n  });\n}","map":{"version":3,"sources":["C:/Users/MaGent/Desktop/video/video/node_modules/html5-player/libs/loader.js"],"names":["Object","defineProperty","exports","value","_extends2","require","_extends3","_interopRequireDefault","_promise","_promise2","chunkLoadErrorHandler","default","selectBundle","_logger","logger","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","error","type","arguments","length","undefined","config","bundle","hlsjs","loadHlsJsBundle","flvjs","loadFlvJsBundle","loadHtml5Bundle","resolve","ensure","success","apiClass","localization","flvConfig","enableWorker","enableStashBuffer","stashInitialSize","isLive","api","videoDOM","file","hlsjsEvents"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nexports.chunkLoadErrorHandler = chunkLoadErrorHandler;\nexports.default = selectBundle;\n\nvar _logger = require('./utils/logger');\n\nvar logger = _interopRequireWildcard(_logger);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction chunkLoadErrorHandler(error) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'h5';\n\n  // Webpack require.ensure error: \"Loading chunk 3 failed\"\n  logger.error('Module Loaded:', 'relative module loaded failed.');\n  throw error;\n}\n//通过配置判断载入的文件\nfunction selectBundle() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var bundle = void 0;\n  if (config.hlsjs) {\n    bundle = loadHlsJsBundle(config);\n  } else if (config.flvjs) {\n    bundle = loadFlvJsBundle(config);\n  } else {\n    bundle = loadHtml5Bundle(config);\n  }\n  return bundle;\n}\n\nfunction loadFlvJsBundle(config) {\n  return new _promise2.default(function (resolve) {\n    require.ensure(['flv.ly.js/dist/flv.js', './api/flvjs-api'], function (require) {\n      var flvjs = require('flv.ly.js/dist/flv.js');\n      logger.success('Module Loaded:', 'relative flv.js module loaded sucessfully.');\n      var apiClass = require('./api/flvjs-api').default;\n      apiClass.prototype.localization = config.localization;\n      if (config.flvConfig && config.flvConfig.enableWorker) {\n        //worker，多线程多线程转换流，减少延时（2秒左右）\n        config.flvConfig = (0, _extends3.default)({}, config.flvConfig, {\n          enableWorker: true,\n          // lazyLoad: false,\n          //Indicates how many seconds of data to be kept for lazyLoad.\n          // lazyLoadMaxDuration: 0,\n          // autoCleanupMaxBackwardDuration: 3,\n          // autoCleanupMinBackwardDuration: 2,\n          // autoCleanupSourceBuffer: true,\n          enableStashBuffer: false,\n          stashInitialSize: 128,\n          isLive: true\n        });\n      }\n      var api = new apiClass(config.videoDOM, config.file, flvjs, config.flvConfig);\n      resolve({\n        flvjs: flvjs,\n        api: api\n      });\n    }, chunkLoadErrorHandler, 'provider.flvjs');\n  });\n}\n\nfunction loadHlsJsBundle(config) {\n  return new _promise2.default(function (resolve) {\n    require.ensure(['hls.js', './api/hlsjs-api', './model/video/events/hlsjs'], function (require) {\n      var hlsjs = require('hls.js');\n      logger.success('Module Loaded:', 'relative hls.js module loaded sucessfully.');\n      var apiClass = require('./api/hlsjs-api').default;\n      apiClass.prototype.localization = config.localization;\n      var api = new apiClass(config.videoDOM, config.file, hlsjs);\n      var hlsjsEvents = require('./model/video/events/hlsjs').default;\n      resolve({\n        hlsjs: hlsjs,\n        api: api,\n        hlsjsEvents: hlsjsEvents\n      });\n    }, chunkLoadErrorHandler, 'provider.hlsjs');\n  });\n}\n\nfunction loadHtml5Bundle(config) {\n  return new _promise2.default(function (resolve) {\n    var apiClass = require('./api/html5-api').default;\n    apiClass.prototype.localization = config.localization;\n    var api = new apiClass(config.videoDOM, config.file);\n    resolve({\n      api: api\n    });\n  });\n}"]},"metadata":{},"sourceType":"script"}