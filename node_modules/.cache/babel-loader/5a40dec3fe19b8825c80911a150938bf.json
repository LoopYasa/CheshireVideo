{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MaGent\\\\Desktop\\\\video\\\\video\\\\src\\\\page\\\\Souman\\\\Reader\\\\index.jsx\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport { NavLink, BrowserRouter as Router, Route } from 'react-router-dom';\nimport { Menu, Dropdown, Button } from 'antd';\nimport { message } from 'antd';\nimport AnimatedRouter from 'react-animated-router';\nimport LongMenu from '../../../components/LongMenu';\nimport Popover from '@material-ui/core/Popover';\nimport './index.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class reader extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      day: \"\",\n      hour: \"\",\n      second: \"\",\n      sign: \"\",\n      count: \"\",\n      mid: \"\",\n      page: \"\",\n      pageSign: \"\",\n      curl: \"\",\n      pageNumber: 1,\n      origin: \"\"\n    };\n\n    this.nextpage = event => {\n      const _this = this;\n\n      const {\n        curl,\n        mid,\n        day,\n        hour,\n        second,\n        sign,\n        pageNumber\n      } = this.state;\n      axios.get('http://localhost:3001/api/getNumberpage', {\n        params: {\n          curl,\n          mid,\n          day,\n          hour,\n          second,\n          sign,\n          pageNumber\n        }\n      }).then(function (response) {\n        _this.setState({\n          page: response.data\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n\n      _this.setState({\n        pageNumber: pageNumber + 1\n      });\n\n      let Node = document.getElementById(\"content\");\n      Node.scrollTop = 0;\n    };\n\n    this.getpage = pageNumber => {\n      const _this = this;\n\n      const {\n        curl,\n        mid,\n        day,\n        hour,\n        second,\n        sign\n      } = this.state;\n      axios.get('http://localhost:3001/api/getNumberpage', {\n        params: {\n          curl,\n          mid,\n          day,\n          hour,\n          second,\n          sign,\n          pageNumber\n        }\n      }).then(function (response) {\n        console.log(response.data);\n\n        _this.setState({\n          pageNumber,\n          page: response.data\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n      let Node = document.getElementById(\"content\");\n      Node.scrollTop = 0;\n    };\n\n    this.setNextChapter = () => {\n      const _this = this;\n\n      let chapter = Number.parseInt(this.state.curl) + 1;\n      axios.get('http://localhost:3001/api/firstinfo', {\n        params: {\n          curl: 'm' + chapter\n        }\n      }).then(function (response) {\n        let day = response.data.day;\n        let hour = response.data.hour;\n        let second = response.data.second;\n        let sign = response.data.result;\n        let count = response.data.count;\n        let mid = response.data.mid;\n\n        _this.setState({\n          day: response.data.day,\n          hour: response.data.hour,\n          second: response.data.second,\n          sign: response.data.result,\n          count: response.data.count,\n          mid: response.data.mid,\n          curl: chapter\n        });\n\n        axios.get('http://localhost:3001/api/getpage', {\n          params: {\n            curl: chapter,\n            mid,\n            day,\n            hour,\n            second,\n            sign\n          }\n        }).then(function (response) {\n          let page = response.data.page;\n          let pageSign = response.data.pageSign;\n\n          _this.setState({\n            page,\n            pageSign,\n            pageNumber: 1\n          });\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    this.preChapter = () => {\n      let _this = this;\n\n      let origin = this.state.origin.slice(-5);\n      let chapter = this.state.curl;\n      console.log(origin, chapter);\n\n      if (Number.parseInt(chapter) - Number.parseInt(origin) !== 0) {\n        const _this = this;\n\n        let chapter = Number.parseInt(this.state.curl) - 1;\n        axios.get('http://localhost:3001/api/firstinfo', {\n          params: {\n            curl: 'm' + chapter\n          }\n        }).then(function (response) {\n          let day = response.data.day;\n          let hour = response.data.hour;\n          let second = response.data.second;\n          let sign = response.data.result;\n          let count = response.data.count;\n          let mid = response.data.mid;\n\n          _this.setState({\n            day: response.data.day,\n            hour: response.data.hour,\n            second: response.data.second,\n            sign: response.data.result,\n            count: response.data.count,\n            mid: response.data.mid,\n            curl: chapter\n          });\n\n          axios.get('http://localhost:3001/api/getpage', {\n            params: {\n              curl: chapter,\n              mid,\n              day,\n              hour,\n              second,\n              sign\n            }\n          }).then(function (response) {\n            let page = response.data.page;\n            let pageSign = response.data.pageSign;\n\n            _this.setState({\n              page,\n              pageSign,\n              pageNumber: 1\n            });\n          }).catch(function (err) {\n            console.log(err);\n          });\n        }).catch(function (err) {\n          console.log(err);\n        });\n      } else {\n        message.warning(\"没有上一章了哦( ･´ω`･ )\");\n      }\n    };\n  }\n\n  componentDidMount() {\n    const _this = this;\n\n    let curl = this.props.location.search.slice(-6);\n    axios.get('http://localhost:3001/api/firstinfo', {\n      params: {\n        curl\n      }\n    }).then(function (response) {\n      let day = response.data.day;\n      let hour = response.data.hour;\n      let second = response.data.second;\n      let sign = response.data.result;\n      let count = response.data.count;\n      let mid = response.data.mid;\n\n      _this.setState({\n        day: response.data.day,\n        hour: response.data.hour,\n        second: response.data.second,\n        sign: response.data.result,\n        count: response.data.count,\n        mid: response.data.mid,\n        curl: curl.slice(-5),\n        origin: curl\n      });\n\n      axios.get('http://localhost:3001/api/getpage', {\n        params: {\n          curl,\n          mid,\n          day,\n          hour,\n          second,\n          sign\n        }\n      }).then(function (response) {\n        let page = response.data.page;\n        let pageSign = response.data.pageSign;\n\n        _this.setState({\n          page,\n          pageSign\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }).catch(function (err) {\n      console.log(err);\n    });\n  } // 用户点击当前页漫画后自动跳转下一页\n\n\n  render() {\n    const {\n      mid,\n      curl,\n      page,\n      pageSign,\n      count,\n      pageNumber\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reader\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        id: \"content\",\n        onClick: () => this.nextpage(),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `http://image.mangabz.com/1/${mid}/${curl}/${page}.jpg?cid=${curl}&key=${pageSign}=`,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom\",\n        children: [/*#__PURE__*/_jsxDEV(LongMenu, {\n          count: count,\n          pageNumber: pageNumber,\n          getpage: this.getpage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"preChaper\",\n            onClick: () => this.preChapter(),\n            children: \"\\u4E0A\\u4E00\\u7AE0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.setNextChapter(),\n            children: \"\\u4E0B\\u4E00\\u7AE0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/MaGent/Desktop/video/video/src/page/Souman/Reader/index.jsx"],"names":["axios","React","Component","NavLink","BrowserRouter","Router","Route","Menu","Dropdown","Button","message","AnimatedRouter","LongMenu","Popover","reader","state","day","hour","second","sign","count","mid","page","pageSign","curl","pageNumber","origin","nextpage","event","_this","get","params","then","response","setState","data","catch","err","console","log","Node","document","getElementById","scrollTop","getpage","setNextChapter","chapter","Number","parseInt","result","preChapter","slice","warning","componentDidMount","props","location","search","render"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport { NavLink, BrowserRouter as Router, Route } from 'react-router-dom';\r\n\r\nimport { Menu, Dropdown, Button } from 'antd'\r\nimport { message } from 'antd';\r\nimport AnimatedRouter from 'react-animated-router'\r\nimport LongMenu from '../../../components/LongMenu'\r\nimport Popover from '@material-ui/core/Popover'\r\n\r\nimport './index.scss'\r\n\r\nexport default class reader extends Component {\r\n\r\n    state = {\r\n        day : \"\",\r\n        hour : \"\",\r\n        second : \"\",\r\n        sign : \"\",\r\n        count : \"\",\r\n        mid : \"\",\r\n        page: \"\",\r\n        pageSign: \"\",\r\n        curl: \"\",\r\n        pageNumber: 1,\r\n        origin: \"\"\r\n    }\r\n\r\n    componentDidMount() {\r\n        const _this = this\r\n        let curl = this.props.location.search.slice(-6)\r\n        axios.get('http://localhost:3001/api/firstinfo', {\r\n            params: {\r\n                curl\r\n            }\r\n        })\r\n        .then( function(response) {\r\n                let day = response.data.day\r\n                let hour = response.data.hour\r\n                let second = response.data.second\r\n                let sign = response.data.result\r\n                let count = response.data.count\r\n                let mid = response.data.mid\r\n            _this.setState({\r\n                day: response.data.day,\r\n                hour: response.data.hour,\r\n                second: response.data.second,\r\n                sign: response.data.result,\r\n                count: response.data.count,\r\n                mid: response.data.mid,\r\n                curl: curl.slice(-5),\r\n                origin: curl\r\n            })\r\n            axios.get('http://localhost:3001/api/getpage',{\r\n                params: {\r\n                    curl,\r\n                    mid,\r\n                    day,\r\n                    hour,\r\n                    second,\r\n                    sign,\r\n                }\r\n            })\r\n            .then( function(response) {\r\n                let page = response.data.page\r\n                let pageSign = response.data.pageSign\r\n                _this.setState({\r\n                    page,\r\n                    pageSign\r\n                })\r\n            })\r\n            .catch( function(err) {\r\n                console.log(err)\r\n            })\r\n        })\r\n        .catch( function(err) {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    // 用户点击当前页漫画后自动跳转下一页\r\n    nextpage = (event) => {\r\n        const _this = this\r\n        const { curl, mid, day, hour, second, sign, pageNumber } = this.state\r\n        axios.get('http://localhost:3001/api/getNumberpage', {\r\n            params: {\r\n                curl,\r\n                mid,\r\n                day,\r\n                hour,\r\n                second,\r\n                sign,\r\n                pageNumber\r\n            }\r\n        })\r\n        .then(function(response) {\r\n            _this.setState({\r\n                page: response.data\r\n            })\r\n        })\r\n        .catch(function(err) {\r\n            console.log(err)\r\n        })\r\n        _this.setState({\r\n            pageNumber: pageNumber + 1\r\n        })\r\n        let Node = document.getElementById(\"content\")\r\n        Node.scrollTop = 0\r\n    }\r\n\r\n    // 传递给hooks函数式组件的调用函数  用于获取用户点击的相对于页数\r\n    getpage = (pageNumber) => {\r\n        const _this = this\r\n        const { curl, mid, day, hour, second, sign } = this.state\r\n        axios.get('http://localhost:3001/api/getNumberpage', {\r\n            params: {\r\n                curl,\r\n                mid,\r\n                day,\r\n                hour,\r\n                second,\r\n                sign,\r\n                pageNumber\r\n            }\r\n        })\r\n        .then(function(response) {\r\n            console.log(response.data)\r\n            _this.setState({\r\n                pageNumber,\r\n                page: response.data\r\n            })\r\n        })\r\n        .catch(function(err) {\r\n            console.log(err)\r\n        })\r\n        let Node = document.getElementById(\"content\")\r\n        Node.scrollTop = 0\r\n    }\r\n\r\n    setNextChapter = () => {\r\n        const _this = this\r\n        let chapter = Number.parseInt(this.state.curl) + 1\r\n        axios.get('http://localhost:3001/api/firstinfo', {\r\n            params: {\r\n                curl: 'm' + chapter\r\n            }\r\n        })\r\n        .then( function(response) {\r\n                let day = response.data.day\r\n                let hour = response.data.hour\r\n                let second = response.data.second\r\n                let sign = response.data.result\r\n                let count = response.data.count\r\n                let mid = response.data.mid\r\n            _this.setState({\r\n                day: response.data.day,\r\n                hour: response.data.hour,\r\n                second: response.data.second,\r\n                sign: response.data.result,\r\n                count: response.data.count,\r\n                mid: response.data.mid,\r\n                curl: chapter\r\n            })\r\n            axios.get('http://localhost:3001/api/getpage',{\r\n                params: {\r\n                    curl: chapter,\r\n                    mid,\r\n                    day,\r\n                    hour,\r\n                    second,\r\n                    sign,\r\n                }\r\n            })\r\n            .then( function(response) {\r\n                let page = response.data.page\r\n                let pageSign = response.data.pageSign\r\n                _this.setState({\r\n                    page,\r\n                    pageSign,\r\n                    pageNumber: 1\r\n                })\r\n            })\r\n            .catch( function(err) {\r\n                console.log(err)\r\n            })\r\n        })\r\n        .catch( function(err) {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    preChapter = () => {\r\n        let _this = this\r\n        let origin = this.state.origin.slice(-5)\r\n        let chapter = this.state.curl\r\n        console.log(origin,chapter)\r\n        if( Number.parseInt(chapter) - Number.parseInt(origin) !== 0 ) {\r\n            const _this = this\r\n            let chapter = Number.parseInt(this.state.curl) - 1\r\n            axios.get('http://localhost:3001/api/firstinfo', {\r\n                params: {\r\n                    curl: 'm' + chapter\r\n                }\r\n            })\r\n            .then( function(response) {\r\n                    let day = response.data.day\r\n                    let hour = response.data.hour\r\n                    let second = response.data.second\r\n                    let sign = response.data.result\r\n                    let count = response.data.count\r\n                    let mid = response.data.mid\r\n                _this.setState({\r\n                    day: response.data.day,\r\n                    hour: response.data.hour,\r\n                    second: response.data.second,\r\n                    sign: response.data.result,\r\n                    count: response.data.count,\r\n                    mid: response.data.mid,\r\n                    curl: chapter\r\n                })\r\n                axios.get('http://localhost:3001/api/getpage',{\r\n                    params: {\r\n                        curl: chapter,\r\n                        mid,\r\n                        day,\r\n                        hour,\r\n                        second,\r\n                        sign,\r\n                    }\r\n                })\r\n                .then( function(response) {\r\n                    let page = response.data.page\r\n                    let pageSign = response.data.pageSign\r\n                    _this.setState({\r\n                        page,\r\n                        pageSign,\r\n                        pageNumber: 1\r\n                    })\r\n                })\r\n                .catch( function(err) {\r\n                    console.log(err)\r\n                })\r\n            })\r\n            .catch( function(err) {\r\n                console.log(err)\r\n            })\r\n        }else {\r\n            message.warning(\"没有上一章了哦( ･´ω`･ )\")\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const { mid, curl, page, pageSign, count, pageNumber } = this.state\r\n\r\n        return (\r\n            <div className=\"reader\">\r\n\r\n                <div className=\"content\" id=\"content\" onClick={ () => this.nextpage() }>\r\n                    <img src={ `http://image.mangabz.com/1/${mid}/${curl}/${page}.jpg?cid=${curl}&key=${pageSign}=` } alt=\"\" />\r\n                </div>\r\n\r\n                <div className=\"bottom\">\r\n                    {/* 页面伸缩菜单栏  显示漫画对应页数  用户点击进行跳转 */}\r\n                    <LongMenu count = { count } pageNumber = { pageNumber } getpage = {this.getpage} />\r\n                    <div>\r\n                    <button className=\"preChaper\" onClick={ () => this.preChapter() }>上一章</button>\r\n                    <button onClick={ () => this.setNextChapter() }>下一章</button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}