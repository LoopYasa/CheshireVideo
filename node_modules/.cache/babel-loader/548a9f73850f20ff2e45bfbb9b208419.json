{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _dec, _class, _class2, _temp2; //外部依赖包\n//import ReactDOM from 'react-dom';\n//import PropTypes from 'prop-types';\n//内部依赖包\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = require('react-redux');\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _tooltip = require('../components/tooltip');\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nvar _util = require('../../utils/util');\n\nvar _time = require('../../model/time');\n\nvar _track = require('../../model/track');\n\nvar _fragment = require('../../model/fragment');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar TimeTooltip = (_dec = (0, _reactRedux.connect)(function (state) {\n  var thumbnails = state[_track.namespace].thumbnails;\n  var props = {\n    duration: state[_time.namespace].secondDuration,\n    fragment: state[_fragment.namespace],\n    thumbnails: thumbnails\n  };\n  return props;\n}), _dec(_class = (_temp2 = _class2 = function (_React$Component) {\n  (0, _inherits3.default)(TimeTooltip, _React$Component);\n\n  function TimeTooltip() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, TimeTooltip);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = TimeTooltip.__proto__ || (0, _getPrototypeOf2.default)(TimeTooltip)).call.apply(_ref, [this].concat(args))), _this), _this.displayName = 'TimeTooltip', _this.state = {\n      percent: 0.5\n    }, _this.dispatch = _this.props.dispatch, _this.onChange = function (percent) {\n      _this.setState({\n        percent: percent\n      });\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  } //这里的配置参考jw-player的api\n\n\n  (0, _createClass3.default)(TimeTooltip, [{\n    key: 'renderContent',\n    value: function renderContent() {\n      //historyTrack是播放录像（合成录像，摄像头上传视频会中断，会分成几个视频，然后这几个视频会合并成一个视频\n      //但是这个视频不是整个时段的，会有断的，historyTrack就是给用户知道这段录像哪里断了）\n      //一般都用不到historyTrack，如果存在historyTrack就优先使用historyTrack的duration\n      var _props = this.props,\n          duration = _props.duration,\n          fragment = _props.fragment,\n          thumbnails = _props.thumbnails,\n          timeSliderShowFormat = _props.timeSliderShowFormat;\n      var videoBeginDateTime = fragment.videoBeginDateTime;\n\n      if (duration === 0) {\n        return false;\n      }\n\n      if (fragment && fragment.duration) {\n        duration = fragment.duration;\n      }\n\n      var _state$percent = this.state.percent,\n          percent = _state$percent === undefined ? 0.5 : _state$percent;\n\n      if (thumbnails && thumbnails[0]) {\n        var position = percent * duration;\n        var style = {};\n        thumbnails.forEach(function (v) {\n          if (position >= v.begin && position < v.end) {\n            var url = '';\n\n            if (!(0, _isString2.default)(v)) {\n              //一张图片中有多张缩略图\n              url = v.thumbnail[1];\n              style.backgroundImage = 'url(\"' + url + '\")';\n              style.backgroundPosition = v.thumbnail[2] * -1 + 'px ' + v.thumbnail[3] * -1 + 'px';\n              style.width = v.thumbnail[4] + 'px';\n              style.height = v.thumbnail[5] + 'px';\n            } else {\n              //单张图片直接做缩略图\n              url = v.thumbnail;\n            }\n          }\n        });\n        return _react2.default.createElement('div', {\n          className: (0, _classnames2.default)('html5-player-time-tooltip-content', {\n            'html5-player-thumbnail-tooltip-content': thumbnails\n          })\n        }, _react2.default.createElement('div', {\n          className: 'html5-player-thumbnail',\n          style: style\n        }), _react2.default.createElement('span', {\n          className: 'html5-player-thumbnail-time'\n        }, (0, _util.hms)(percent * duration)));\n      } else {\n        return _react2.default.createElement('div', {\n          className: 'html5-player-time-tooltip-content'\n        }, (!videoBeginDateTime || timeSliderShowFormat === 'time') && (0, _util.hms)(percent * duration), videoBeginDateTime && timeSliderShowFormat === 'date' && (0, _util.dateFormat)((videoBeginDateTime + percent * duration) * 1000, 'YYYY-MM-DD HH:mm:ss'));\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(_tooltip2.default, {\n        className: 'html5-player-time-tooltip',\n        content: this.renderContent(),\n        type: 'move',\n        onChange: this.onChange,\n        percent: this.state.percent,\n        isAnimateActive: false\n      }, _react2.default.createElement('div', {\n        className: 'html5-player-for-tooltip'\n      }));\n    }\n  }]);\n  return TimeTooltip;\n}(_react2.default.Component), _class2.propTypes = {}, _temp2)) || _class);\nexports.default = TimeTooltip;","map":{"version":3,"sources":["C:/Users/MaGent/Desktop/video/video/node_modules/html5-player/libs/view/controlbar/time-tooltip.js"],"names":["Object","defineProperty","exports","value","default","undefined","_getPrototypeOf","require","_getPrototypeOf2","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_dec","_class","_class2","_temp2","_react","_react2","_reactRedux","_classnames","_classnames2","_isString","_isString2","_tooltip","_tooltip2","_util","_time","_track","_fragment","obj","__esModule","TimeTooltip","connect","state","thumbnails","namespace","props","duration","secondDuration","fragment","_React$Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","call","apply","concat","displayName","percent","dispatch","onChange","setState","key","renderContent","_props","timeSliderShowFormat","videoBeginDateTime","_state$percent","position","style","forEach","v","begin","end","url","thumbnail","backgroundImage","backgroundPosition","width","height","createElement","className","hms","dateFormat","render","content","type","isAnimateActive","Component","propTypes"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _dec, _class, _class2, _temp2; //外部依赖包\n\n//import ReactDOM from 'react-dom';\n//import PropTypes from 'prop-types';\n\n//内部依赖包\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = require('react-redux');\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _tooltip = require('../components/tooltip');\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nvar _util = require('../../utils/util');\n\nvar _time = require('../../model/time');\n\nvar _track = require('../../model/track');\n\nvar _fragment = require('../../model/fragment');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TimeTooltip = (_dec = (0, _reactRedux.connect)(function (state) {\n  var thumbnails = state[_track.namespace].thumbnails;\n  var props = {\n    duration: state[_time.namespace].secondDuration,\n    fragment: state[_fragment.namespace],\n    thumbnails: thumbnails\n  };\n  return props;\n}), _dec(_class = (_temp2 = _class2 = function (_React$Component) {\n  (0, _inherits3.default)(TimeTooltip, _React$Component);\n\n  function TimeTooltip() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, TimeTooltip);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = TimeTooltip.__proto__ || (0, _getPrototypeOf2.default)(TimeTooltip)).call.apply(_ref, [this].concat(args))), _this), _this.displayName = 'TimeTooltip', _this.state = {\n      percent: 0.5\n    }, _this.dispatch = _this.props.dispatch, _this.onChange = function (percent) {\n      _this.setState({\n        percent: percent\n      });\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n  //这里的配置参考jw-player的api\n\n\n  (0, _createClass3.default)(TimeTooltip, [{\n    key: 'renderContent',\n    value: function renderContent() {\n      //historyTrack是播放录像（合成录像，摄像头上传视频会中断，会分成几个视频，然后这几个视频会合并成一个视频\n      //但是这个视频不是整个时段的，会有断的，historyTrack就是给用户知道这段录像哪里断了）\n      //一般都用不到historyTrack，如果存在historyTrack就优先使用historyTrack的duration\n      var _props = this.props,\n          duration = _props.duration,\n          fragment = _props.fragment,\n          thumbnails = _props.thumbnails,\n          timeSliderShowFormat = _props.timeSliderShowFormat;\n      var videoBeginDateTime = fragment.videoBeginDateTime;\n\n      if (duration === 0) {\n        return false;\n      }\n      if (fragment && fragment.duration) {\n        duration = fragment.duration;\n      }\n      var _state$percent = this.state.percent,\n          percent = _state$percent === undefined ? 0.5 : _state$percent;\n\n      if (thumbnails && thumbnails[0]) {\n        var position = percent * duration;\n        var style = {};\n        thumbnails.forEach(function (v) {\n          if (position >= v.begin && position < v.end) {\n            var url = '';\n            if (!(0, _isString2.default)(v)) {\n              //一张图片中有多张缩略图\n              url = v.thumbnail[1];\n              style.backgroundImage = 'url(\"' + url + '\")';\n              style.backgroundPosition = v.thumbnail[2] * -1 + 'px ' + v.thumbnail[3] * -1 + 'px';\n              style.width = v.thumbnail[4] + 'px';\n              style.height = v.thumbnail[5] + 'px';\n            } else {\n              //单张图片直接做缩略图\n              url = v.thumbnail;\n            }\n          }\n        });\n        return _react2.default.createElement(\n          'div',\n          {\n            className: (0, _classnames2.default)('html5-player-time-tooltip-content', {\n              'html5-player-thumbnail-tooltip-content': thumbnails\n            })\n          },\n          _react2.default.createElement('div', { className: 'html5-player-thumbnail', style: style }),\n          _react2.default.createElement(\n            'span',\n            { className: 'html5-player-thumbnail-time' },\n            (0, _util.hms)(percent * duration)\n          )\n        );\n      } else {\n        return _react2.default.createElement(\n          'div',\n          { className: 'html5-player-time-tooltip-content' },\n          (!videoBeginDateTime || timeSliderShowFormat === 'time') && (0, _util.hms)(percent * duration),\n          videoBeginDateTime && timeSliderShowFormat === 'date' && (0, _util.dateFormat)((videoBeginDateTime + percent * duration) * 1000, 'YYYY-MM-DD HH:mm:ss')\n        );\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        _tooltip2.default,\n        {\n          className: 'html5-player-time-tooltip',\n          content: this.renderContent(),\n          type: 'move',\n          onChange: this.onChange,\n          percent: this.state.percent,\n          isAnimateActive: false\n        },\n        _react2.default.createElement('div', { className: 'html5-player-for-tooltip' })\n      );\n    }\n  }]);\n  return TimeTooltip;\n}(_react2.default.Component), _class2.propTypes = {}, _temp2)) || _class);\nexports.default = TimeTooltip;"]},"metadata":{},"sourceType":"script"}