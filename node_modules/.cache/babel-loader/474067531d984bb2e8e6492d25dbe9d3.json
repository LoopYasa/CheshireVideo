{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nexports.standardReducer = standardReducer;\nexports.isM3u8File = isM3u8File;\nexports.shouldUseHlsjs = shouldUseHlsjs;\nexports.isFlvFile = isFlvFile;\nexports.shouldUseFlvjs = shouldUseFlvjs;\nexports.isH5VideoSupported = isH5VideoSupported;\nexports.isNotTouchEvent = isNotTouchEvent;\nexports.trim = trim;\nexports.hms = hms;\nexports.pad = pad;\nexports.seconds = seconds;\nexports.joinUrlParams = joinUrlParams;\nexports.delay = delay;\nexports.randomKey = randomKey;\nexports.getChildProps = getChildProps;\nexports.getChildName = getChildName;\nexports.cloneElement = cloneElement;\nexports.dateFormat = dateFormat;\nexports.urlProtocolAdapter = urlProtocolAdapter;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _isNaN = require('lodash/isNaN');\n\nvar _isNaN2 = _interopRequireDefault(_isNaN);\n\nvar _isNumber = require('lodash/isNumber');\n\nvar _isNumber2 = _interopRequireDefault(_isNumber);\n\nvar _queryString = require('../libs/query-string');\n\nvar queryString = _interopRequireWildcard(_queryString);\n\nvar _video = require('./video');\n\nvar _video2 = _interopRequireDefault(_video);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n *  标准reducer处理，根据payload进行处理。\n *  action的格式{\n *    type: '',\n *    payload: {}\n *  }\n */\n\n\nfunction standardReducer(state, _ref) {\n  var payload = _ref.payload;\n  return (0, _extends3.default)({}, state, payload);\n} //根据.m3u判断\n\n\nfunction isM3u8File() {\n  var file = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return !!~file.indexOf('.m3u');\n} //是否应该使用hls.js\n\n\nfunction shouldUseHlsjs(file) {\n  var forceOpenHls = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var hlsjs = false;\n\n  if (forceOpenHls || isM3u8File(file) && !_video2.default.canPlayType('application/vnd.apple.mpegurl')) {\n    hlsjs = true;\n  }\n\n  return hlsjs;\n} //根据.m3u判断\n\n\nfunction isFlvFile() {\n  var file = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return !!~file.indexOf('.flv');\n} //是否应该使用flv.js\n\n\nfunction shouldUseFlvjs(file) {\n  var flvjs = false;\n\n  if (isFlvFile(file) && !_video2.default.canPlayType('video/x-flv')) {\n    flvjs = true;\n  }\n\n  return flvjs;\n} //当前浏览器视频支持视频播放\n\n\nfunction isH5VideoSupported(file) {\n  var match = file.match(/.*\\.(.*)$/);\n  var suffix = match && match[1];\n\n  if (!suffix) {\n    //无后缀名的直接通过。\n    return true;\n  } //以下视频容器格式都是chrome支持的\n\n\n  var container = {\n    mp4: 'video/mp4',\n    f4v: 'video/mp4',\n    m4v: 'video/mp4',\n    mov: 'video/mp4',\n    ogv: 'video/ogg',\n    ogg: 'video/ogg',\n    oga: 'video/ogg',\n    vorbis: 'video/ogg',\n    webm: 'video/webm',\n    m3u8: 'application/vnd.apple.mpegurl',\n    m3u: 'application/vnd.apple.mpegurl',\n    hls: 'application/vnd.apple.mpegurl'\n  };\n\n  if (!_video2.default.canPlayType) {\n    //如果canPlayType不存在，返回true，做兼容。\n    //测试中PhantomJS不支持canPlayType。\n    return true;\n  }\n\n  return !!_video2.default.canPlayType(container[suffix]);\n} //是否是手机触摸事件\n\n\nfunction isNotTouchEvent(e) {\n  return e.touches.length > 1 || e.type.toLowerCase() === 'touchend' && e.touches.length > 0;\n}\n\nfunction trim(inputString) {\n  return inputString.replace(/^\\s+|\\s+$/g, '');\n} //秒转时间格式，根据时间自动判段（mm:ss || HH:mm:ss）\n\n\nfunction hms(secondsNumber) {\n  var h = Math.floor(secondsNumber / 3600);\n  var m = Math.floor(secondsNumber / 60) % 60;\n  var s = secondsNumber % 60;\n\n  if ((0, _isNaN2.default)(h) || (0, _isNaN2.default)(m) || (0, _isNaN2.default)(s)) {\n    h = 0;\n    m = 0;\n    s = 0;\n  }\n\n  if (h === 0) {\n    return pad(m, 2) + ':' + pad(s.toFixed(0), 2);\n  }\n\n  return pad(h, 2) + ':' + pad(m, 2) + ':' + pad(s.toFixed(0), 2);\n} //根据提供的长度和字符串长度，向右填充指定字符\n\n\nfunction pad(str, length, padder) {\n  str = '' + str;\n  padder = padder || '0';\n\n  while (str.length < length) {\n    str = padder + str;\n  }\n\n  return str;\n} // Convert a time-representing string to a number\n\n\nfunction seconds(str, frameRate) {\n  if (!str) {\n    return 0;\n  }\n\n  if ((0, _isNumber2.default)(str) && !(0, _isNaN2.default)(str)) {\n    return str;\n  }\n\n  str = str.replace(',', '.');\n  var arr = str.split(':');\n  var arrLength = arr.length;\n  var sec = 0;\n\n  if (str.slice(-1) === 's') {\n    sec = parseFloat(str);\n  } else if (str.slice(-1) === 'm') {\n    sec = parseFloat(str) * 60;\n  } else if (str.slice(-1) === 'h') {\n    sec = parseFloat(str) * 3600;\n  } else if (arrLength > 1) {\n    var secIndex = arrLength - 1;\n\n    if (arrLength === 4) {\n      // if frame is included in the string, calculate seconds by dividing by frameRate\n      if (frameRate) {\n        sec = parseFloat(arr[secIndex]) / frameRate;\n      }\n\n      secIndex -= 1;\n    }\n\n    sec += parseFloat(arr[secIndex]);\n    sec += parseFloat(arr[secIndex - 1]) * 60;\n\n    if (arrLength >= 3) {\n      sec += parseFloat(arr[secIndex - 2]) * 3600;\n    }\n  } else {\n    sec = parseFloat(str);\n  }\n\n  if ((0, _isNaN2.default)(sec)) {\n    return 0;\n  }\n\n  return sec;\n}\n\nfunction joinUrlParams(url, newQueryParams, options) {\n  return queryString.joinUrlParams(url, newQueryParams, options);\n}\n\nfunction delay(ms) {\n  if ((0, _isNaN2.default)(ms)) {\n    console.error('请输入正确的毫秒！');\n    return;\n  }\n\n  var timeoutId = 0;\n  var promise = new _promise2.default(function (resolve) {\n    timeoutId = setTimeout(function () {\n      return resolve(true);\n    }, ms);\n  });\n\n  promise.clearTimeout = function () {\n    clearTimeout(timeoutId);\n  };\n\n  return promise;\n}\n\nfunction randomKey() {\n  return Math.random().toString(36).substring(7).split('').join('');\n}\n/**\n * getChildProps 获取react children props，如果children是数组，取第一个。\n * @param  {object} children react children\n * @return {object}          返回children props。\n */\n\n\nfunction getChildProps(children) {\n  //preact生成环境下children只有一个也变成数组;\n  var childProps = (children[0] || children).attributes;\n\n  if (!childProps) {\n    childProps = (children[0] || children).props;\n  }\n\n  return childProps;\n} //原生html标签才生效\n\n\nfunction getChildName(children) {\n  //preact生成环境下children只有一个也变成数组;\n  var childName = (children[0] || children).nodeName;\n\n  if (!childName) {\n    childName = (children[0] || children).type;\n  }\n\n  return childName;\n}\n/**\n * clone单个的chidren，多个的暂不支持。\n */\n\n\nfunction cloneElement(element, props, children) {\n  var elementProps = getChildProps(element);\n  return _react2.default.createElement(getChildName(element), (0, _extends3.default)({}, elementProps, props), [elementProps.children, children]);\n}\n/**\n *  日期格式转换\n *@param {String||Int} time 时间戳（毫秒级）或 其他的日期的各种格式\n *@param { String } fmt 格式如 YYYY-MM-DD HH:mm:ss.S ==> 2016-07-02 08:09:04.423,可自定义\n *@return 返回自定义的时间格式\n */\n\n\nfunction dateFormat(time, fmt) {\n  var date = new Date(time);\n  var o = {\n    'M+': date.getMonth() + 1,\n    //月份\n    'D+': date.getDate(),\n    //日\n    'H+': date.getHours(),\n    //小时\n    'm+': date.getMinutes(),\n    //分\n    's+': date.getSeconds(),\n    //秒\n    'q+': Math.floor((date.getMonth() + 3) / 3),\n    //季度\n    S: date.getMilliseconds() //毫秒\n\n  };\n  if (/(Y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\n\n  for (var k in o) {\n    if (new RegExp('(' + k + ')').test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length === 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));\n  }\n\n  return fmt;\n}\n/**\n * 视频url的协议类型，如果传进来的是`//www.test.com/xxxx`\n * @param {string} url url参数\n */\n\n\nfunction urlProtocolAdapter(url) {\n  if (url.trim().indexOf('//') === 0) {\n    return '' + location.protocol + url;\n  } else {\n    return url;\n  }\n}","map":{"version":3,"sources":["C:/Users/MaGent/Desktop/video/video/node_modules/html5-player/libs/utils/util.js"],"names":["Object","defineProperty","exports","value","_promise","require","_promise2","_interopRequireDefault","_extends2","_extends3","standardReducer","isM3u8File","shouldUseHlsjs","isFlvFile","shouldUseFlvjs","isH5VideoSupported","isNotTouchEvent","trim","hms","pad","seconds","joinUrlParams","delay","randomKey","getChildProps","getChildName","cloneElement","dateFormat","urlProtocolAdapter","_react","_react2","_isNaN","_isNaN2","_isNumber","_isNumber2","_queryString","queryString","_interopRequireWildcard","_video","_video2","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","default","state","_ref","payload","file","arguments","length","undefined","indexOf","forceOpenHls","hlsjs","canPlayType","flvjs","match","suffix","container","mp4","f4v","m4v","mov","ogv","ogg","oga","vorbis","webm","m3u8","m3u","hls","e","touches","type","toLowerCase","inputString","replace","secondsNumber","h","Math","floor","m","s","toFixed","str","padder","frameRate","arr","split","arrLength","sec","slice","parseFloat","secIndex","url","newQueryParams","options","ms","console","error","timeoutId","promise","resolve","setTimeout","clearTimeout","random","toString","substring","join","children","childProps","attributes","props","childName","nodeName","element","elementProps","createElement","time","fmt","date","Date","o","getMonth","getDate","getHours","getMinutes","getSeconds","S","getMilliseconds","test","RegExp","$1","getFullYear","substr","k","location","protocol"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nexports.standardReducer = standardReducer;\nexports.isM3u8File = isM3u8File;\nexports.shouldUseHlsjs = shouldUseHlsjs;\nexports.isFlvFile = isFlvFile;\nexports.shouldUseFlvjs = shouldUseFlvjs;\nexports.isH5VideoSupported = isH5VideoSupported;\nexports.isNotTouchEvent = isNotTouchEvent;\nexports.trim = trim;\nexports.hms = hms;\nexports.pad = pad;\nexports.seconds = seconds;\nexports.joinUrlParams = joinUrlParams;\nexports.delay = delay;\nexports.randomKey = randomKey;\nexports.getChildProps = getChildProps;\nexports.getChildName = getChildName;\nexports.cloneElement = cloneElement;\nexports.dateFormat = dateFormat;\nexports.urlProtocolAdapter = urlProtocolAdapter;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _isNaN = require('lodash/isNaN');\n\nvar _isNaN2 = _interopRequireDefault(_isNaN);\n\nvar _isNumber = require('lodash/isNumber');\n\nvar _isNumber2 = _interopRequireDefault(_isNumber);\n\nvar _queryString = require('../libs/query-string');\n\nvar queryString = _interopRequireWildcard(_queryString);\n\nvar _video = require('./video');\n\nvar _video2 = _interopRequireDefault(_video);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n *  标准reducer处理，根据payload进行处理。\n *  action的格式{\n *    type: '',\n *    payload: {}\n *  }\n */\nfunction standardReducer(state, _ref) {\n  var payload = _ref.payload;\n\n  return (0, _extends3.default)({}, state, payload);\n}\n//根据.m3u判断\nfunction isM3u8File() {\n  var file = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n  return !!~file.indexOf('.m3u');\n}\n//是否应该使用hls.js\nfunction shouldUseHlsjs(file) {\n  var forceOpenHls = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var hlsjs = false;\n  if (forceOpenHls || isM3u8File(file) && !_video2.default.canPlayType('application/vnd.apple.mpegurl')) {\n    hlsjs = true;\n  }\n  return hlsjs;\n}\n//根据.m3u判断\nfunction isFlvFile() {\n  var file = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n  return !!~file.indexOf('.flv');\n}\n//是否应该使用flv.js\nfunction shouldUseFlvjs(file) {\n  var flvjs = false;\n  if (isFlvFile(file) && !_video2.default.canPlayType('video/x-flv')) {\n    flvjs = true;\n  }\n  return flvjs;\n}\n//当前浏览器视频支持视频播放\nfunction isH5VideoSupported(file) {\n  var match = file.match(/.*\\.(.*)$/);\n  var suffix = match && match[1];\n  if (!suffix) {\n    //无后缀名的直接通过。\n    return true;\n  }\n  //以下视频容器格式都是chrome支持的\n  var container = {\n    mp4: 'video/mp4',\n    f4v: 'video/mp4',\n    m4v: 'video/mp4',\n    mov: 'video/mp4',\n    ogv: 'video/ogg',\n    ogg: 'video/ogg',\n    oga: 'video/ogg',\n    vorbis: 'video/ogg',\n    webm: 'video/webm',\n    m3u8: 'application/vnd.apple.mpegurl',\n    m3u: 'application/vnd.apple.mpegurl',\n    hls: 'application/vnd.apple.mpegurl'\n  };\n  if (!_video2.default.canPlayType) {\n    //如果canPlayType不存在，返回true，做兼容。\n    //测试中PhantomJS不支持canPlayType。\n    return true;\n  }\n  return !!_video2.default.canPlayType(container[suffix]);\n}\n//是否是手机触摸事件\nfunction isNotTouchEvent(e) {\n  return e.touches.length > 1 || e.type.toLowerCase() === 'touchend' && e.touches.length > 0;\n}\n\nfunction trim(inputString) {\n  return inputString.replace(/^\\s+|\\s+$/g, '');\n}\n//秒转时间格式，根据时间自动判段（mm:ss || HH:mm:ss）\nfunction hms(secondsNumber) {\n  var h = Math.floor(secondsNumber / 3600);\n  var m = Math.floor(secondsNumber / 60) % 60;\n  var s = secondsNumber % 60;\n  if ((0, _isNaN2.default)(h) || (0, _isNaN2.default)(m) || (0, _isNaN2.default)(s)) {\n    h = 0;\n    m = 0;\n    s = 0;\n  }\n  if (h === 0) {\n    return pad(m, 2) + ':' + pad(s.toFixed(0), 2);\n  }\n  return pad(h, 2) + ':' + pad(m, 2) + ':' + pad(s.toFixed(0), 2);\n}\n//根据提供的长度和字符串长度，向右填充指定字符\nfunction pad(str, length, padder) {\n  str = '' + str;\n  padder = padder || '0';\n  while (str.length < length) {\n    str = padder + str;\n  }\n  return str;\n}\n\n// Convert a time-representing string to a number\nfunction seconds(str, frameRate) {\n  if (!str) {\n    return 0;\n  }\n  if ((0, _isNumber2.default)(str) && !(0, _isNaN2.default)(str)) {\n    return str;\n  }\n\n  str = str.replace(',', '.');\n  var arr = str.split(':');\n  var arrLength = arr.length;\n  var sec = 0;\n  if (str.slice(-1) === 's') {\n    sec = parseFloat(str);\n  } else if (str.slice(-1) === 'm') {\n    sec = parseFloat(str) * 60;\n  } else if (str.slice(-1) === 'h') {\n    sec = parseFloat(str) * 3600;\n  } else if (arrLength > 1) {\n    var secIndex = arrLength - 1;\n    if (arrLength === 4) {\n      // if frame is included in the string, calculate seconds by dividing by frameRate\n      if (frameRate) {\n        sec = parseFloat(arr[secIndex]) / frameRate;\n      }\n      secIndex -= 1;\n    }\n    sec += parseFloat(arr[secIndex]);\n    sec += parseFloat(arr[secIndex - 1]) * 60;\n    if (arrLength >= 3) {\n      sec += parseFloat(arr[secIndex - 2]) * 3600;\n    }\n  } else {\n    sec = parseFloat(str);\n  }\n  if ((0, _isNaN2.default)(sec)) {\n    return 0;\n  }\n  return sec;\n}\n\nfunction joinUrlParams(url, newQueryParams, options) {\n  return queryString.joinUrlParams(url, newQueryParams, options);\n}\n\nfunction delay(ms) {\n  if ((0, _isNaN2.default)(ms)) {\n    console.error('请输入正确的毫秒！');\n    return;\n  }\n\n  var timeoutId = 0;\n  var promise = new _promise2.default(function (resolve) {\n    timeoutId = setTimeout(function () {\n      return resolve(true);\n    }, ms);\n  });\n  promise.clearTimeout = function () {\n    clearTimeout(timeoutId);\n  };\n  return promise;\n}\n\nfunction randomKey() {\n  return Math.random().toString(36).substring(7).split('').join('');\n}\n/**\n * getChildProps 获取react children props，如果children是数组，取第一个。\n * @param  {object} children react children\n * @return {object}          返回children props。\n */\nfunction getChildProps(children) {\n  //preact生成环境下children只有一个也变成数组;\n  var childProps = (children[0] || children).attributes;\n  if (!childProps) {\n    childProps = (children[0] || children).props;\n  }\n  return childProps;\n}\n//原生html标签才生效\nfunction getChildName(children) {\n  //preact生成环境下children只有一个也变成数组;\n  var childName = (children[0] || children).nodeName;\n  if (!childName) {\n    childName = (children[0] || children).type;\n  }\n  return childName;\n}\n/**\n * clone单个的chidren，多个的暂不支持。\n */\nfunction cloneElement(element, props, children) {\n  var elementProps = getChildProps(element);\n  return _react2.default.createElement(getChildName(element), (0, _extends3.default)({}, elementProps, props), [elementProps.children, children]);\n}\n\n/**\n *  日期格式转换\n *@param {String||Int} time 时间戳（毫秒级）或 其他的日期的各种格式\n *@param { String } fmt 格式如 YYYY-MM-DD HH:mm:ss.S ==> 2016-07-02 08:09:04.423,可自定义\n *@return 返回自定义的时间格式\n */\nfunction dateFormat(time, fmt) {\n  var date = new Date(time);\n  var o = {\n    'M+': date.getMonth() + 1, //月份\n    'D+': date.getDate(), //日\n    'H+': date.getHours(), //小时\n    'm+': date.getMinutes(), //分\n    's+': date.getSeconds(), //秒\n    'q+': Math.floor((date.getMonth() + 3) / 3), //季度\n    S: date.getMilliseconds() //毫秒\n  };\n  if (/(Y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\n  for (var k in o) {\n    if (new RegExp('(' + k + ')').test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length === 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));\n  }return fmt;\n}\n/**\n * 视频url的协议类型，如果传进来的是`//www.test.com/xxxx`\n * @param {string} url url参数\n */\nfunction urlProtocolAdapter(url) {\n  if (url.trim().indexOf('//') === 0) {\n    return '' + location.protocol + url;\n  } else {\n    return url;\n  }\n}"]},"metadata":{},"sourceType":"script"}