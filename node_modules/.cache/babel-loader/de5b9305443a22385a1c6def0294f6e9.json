{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _class, _temp2; //外部依赖包\n//内部依赖包\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _addEventListener = require('../../../utils/dom/addEventListener');\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar Selection = (_temp2 = _class = function (_React$Component) {\n  (0, _inherits3.default)(Selection, _React$Component);\n\n  function Selection() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, Selection);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = Selection.__proto__ || (0, _getPrototypeOf2.default)(Selection)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.dispatch = _this.props.dispatch, _this.events = [], _this.eventsAfterMouseDown = [], _this.onChange = function (percent) {\n      var onChange = _this.props.onChange;\n      onChange && onChange(percent);\n    }, _this.onBlur = function (percent) {\n      var onBlur = _this.props.onBlur;\n      onBlur && onBlur(percent);\n    }, _this.onMouseDown = function (e) {\n      e.stopPropagation();\n\n      _this.bindEventsAfterMouseDown();\n    }, _this.onMouseUp = function (e) {\n      e.stopPropagation();\n\n      _this.removeEventsAfterMouseDown();\n\n      _this.onBlur(_this.percent);\n    }, _this.onMouseMove = function (e) {\n      _this.onStart(e.pageX);\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(Selection, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.selectionDOM = _reactDom2.default.findDOMNode(this.refs['selection']);\n      this.document = this.selectionDOM.ownerDocument;\n      this.bindEvents();\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var nextPercent = nextProps.percent;\n      var thisPercent = this.props.percent;\n\n      if (thisPercent || thisPercent === 0) {\n        if (nextPercent !== thisPercent) {\n          this.setSliderValueByPercent(nextPercent);\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.removeEvents();\n    }\n  }, {\n    key: 'setSliderValueByPercent',\n    value: function setSliderValueByPercent() {\n      var percent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.percent = percent;\n    }\n  }, {\n    key: 'bindEvents',\n    value: function bindEvents() {\n      //像mousemove、mousedown、mouseup等事件，直接使用jsx绑定方式，在高德地图上的tooltip会失效。\n      this.events.push((0, _addEventListener2.default)(this.selectionDOM, 'mousedown', this.onMouseDown));\n      this.events.push((0, _addEventListener2.default)(this.selectionDOM, 'mouseup', this.onMouseUp));\n    }\n  }, {\n    key: 'removeEvents',\n    value: function removeEvents() {\n      //移除事件\n      this.events.forEach(function (v) {\n        v.remove && v.remove();\n      });\n    }\n  }, {\n    key: 'bindEventsAfterMouseDown',\n    value: function bindEventsAfterMouseDown() {\n      var timeSliderDOM = this.context.timeSliderDOM.children[0];\n      this.eventsAfterMouseDown.push((0, _addEventListener2.default)(this.document, 'mousemove', this.onMouseMove));\n      this.eventsAfterMouseDown.push((0, _addEventListener2.default)(this.document, 'mouseup', this.onMouseUp));\n      this.eventsAfterMouseDown.push((0, _addEventListener2.default)(timeSliderDOM, 'onMouseMove', this.onMouseMove));\n    }\n  }, {\n    key: 'removeEventsAfterMouseDown',\n    value: function removeEventsAfterMouseDown() {\n      //移除事件\n      this.eventsAfterMouseDown.forEach(function (v) {\n        v.remove && v.remove();\n      });\n    }\n  }, {\n    key: 'getSliderStart',\n    value: function getSliderStart() {\n      var slider = this.context.timeSliderDOM.children[0];\n      var rect = slider.getBoundingClientRect();\n      return rect.left;\n    }\n  }, {\n    key: 'calcValueByPos',\n    value: function calcValueByPos(position) {\n      var pixelOffset = position - this.getSliderStart();\n      return pixelOffset;\n    }\n  }, {\n    key: 'onStart',\n    value: function onStart(position) {\n      var value = this.calcValueByPos(position);\n      var timeSliderDOM = this.context.timeSliderDOM.children[0];\n      var sliderLength = timeSliderDOM.clientWidth;\n\n      if (value < 0) {\n        value = 0;\n      }\n\n      if (value > sliderLength) {\n        value = sliderLength;\n      }\n\n      var percent = value / sliderLength;\n      var defaultPercent = this.props.defaultPercent;\n\n      if (defaultPercent || defaultPercent === 0) {\n        this.percent = percent;\n        this.setState({\n          random: Math.random()\n        });\n      }\n\n      this.onChange(percent);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          percent = _props.percent,\n          defaultPercent = _props.defaultPercent,\n          children = _props.children,\n          other = (0, _objectWithoutProperties3.default)(_props, ['percent', 'defaultPercent', 'children']);\n\n      if (this.percent === undefined) {\n        this.percent = percent || defaultPercent || 0;\n      }\n\n      var style = (0, _extends3.default)({}, this.props.style);\n      style.left = this.percent * 100 + '%';\n      return _react2.default.createElement('div', (0, _extends3.default)({}, other, {\n        style: style,\n        ref: 'selection'\n      }), children);\n    }\n  }]);\n  return Selection;\n}(_react2.default.Component), _class.propTypes = {}, _class.displayName = 'Selection', _class.contextTypes = {\n  timeSliderDOM: _propTypes2.default.object\n}, _temp2);\nexports.default = Selection;","map":{"version":3,"sources":["C:/Users/MaGent/Desktop/video/video/node_modules/html5-player/libs/view/controlbar/time-slider/selection.js"],"names":["Object","defineProperty","exports","value","default","undefined","_extends2","require","_extends3","_interopRequireDefault","_objectWithoutProperties2","_objectWithoutProperties3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_class","_temp2","_react","_react2","_reactDom","_reactDom2","_propTypes","_propTypes2","_addEventListener","_addEventListener2","obj","__esModule","Selection","_React$Component","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","__proto__","call","apply","concat","state","dispatch","props","events","eventsAfterMouseDown","onChange","percent","onBlur","onMouseDown","e","stopPropagation","bindEventsAfterMouseDown","onMouseUp","removeEventsAfterMouseDown","onMouseMove","onStart","pageX","key","componentDidMount","selectionDOM","findDOMNode","refs","document","ownerDocument","bindEvents","componentWillReceiveProps","nextProps","nextPercent","thisPercent","setSliderValueByPercent","componentWillUnmount","removeEvents","push","forEach","v","remove","timeSliderDOM","context","children","getSliderStart","slider","rect","getBoundingClientRect","left","calcValueByPos","position","pixelOffset","sliderLength","clientWidth","defaultPercent","setState","random","Math","render","_props","other","style","createElement","ref","Component","propTypes","displayName","contextTypes","object"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _class, _temp2; //外部依赖包\n\n//内部依赖包\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _addEventListener = require('../../../utils/dom/addEventListener');\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Selection = (_temp2 = _class = function (_React$Component) {\n  (0, _inherits3.default)(Selection, _React$Component);\n\n  function Selection() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, Selection);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = Selection.__proto__ || (0, _getPrototypeOf2.default)(Selection)).call.apply(_ref, [this].concat(args))), _this), _this.state = {}, _this.dispatch = _this.props.dispatch, _this.events = [], _this.eventsAfterMouseDown = [], _this.onChange = function (percent) {\n      var onChange = _this.props.onChange;\n\n      onChange && onChange(percent);\n    }, _this.onBlur = function (percent) {\n      var onBlur = _this.props.onBlur;\n\n      onBlur && onBlur(percent);\n    }, _this.onMouseDown = function (e) {\n      e.stopPropagation();\n      _this.bindEventsAfterMouseDown();\n    }, _this.onMouseUp = function (e) {\n      e.stopPropagation();\n      _this.removeEventsAfterMouseDown();\n      _this.onBlur(_this.percent);\n    }, _this.onMouseMove = function (e) {\n      _this.onStart(e.pageX);\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(Selection, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.selectionDOM = _reactDom2.default.findDOMNode(this.refs['selection']);\n      this.document = this.selectionDOM.ownerDocument;\n      this.bindEvents();\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var nextPercent = nextProps.percent;\n      var thisPercent = this.props.percent;\n\n      if (thisPercent || thisPercent === 0) {\n        if (nextPercent !== thisPercent) {\n          this.setSliderValueByPercent(nextPercent);\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.removeEvents();\n    }\n  }, {\n    key: 'setSliderValueByPercent',\n    value: function setSliderValueByPercent() {\n      var percent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.percent = percent;\n    }\n  }, {\n    key: 'bindEvents',\n    value: function bindEvents() {\n      //像mousemove、mousedown、mouseup等事件，直接使用jsx绑定方式，在高德地图上的tooltip会失效。\n      this.events.push((0, _addEventListener2.default)(this.selectionDOM, 'mousedown', this.onMouseDown));\n      this.events.push((0, _addEventListener2.default)(this.selectionDOM, 'mouseup', this.onMouseUp));\n    }\n  }, {\n    key: 'removeEvents',\n    value: function removeEvents() {\n      //移除事件\n      this.events.forEach(function (v) {\n        v.remove && v.remove();\n      });\n    }\n  }, {\n    key: 'bindEventsAfterMouseDown',\n    value: function bindEventsAfterMouseDown() {\n      var timeSliderDOM = this.context.timeSliderDOM.children[0];\n      this.eventsAfterMouseDown.push((0, _addEventListener2.default)(this.document, 'mousemove', this.onMouseMove));\n      this.eventsAfterMouseDown.push((0, _addEventListener2.default)(this.document, 'mouseup', this.onMouseUp));\n      this.eventsAfterMouseDown.push((0, _addEventListener2.default)(timeSliderDOM, 'onMouseMove', this.onMouseMove));\n    }\n  }, {\n    key: 'removeEventsAfterMouseDown',\n    value: function removeEventsAfterMouseDown() {\n      //移除事件\n      this.eventsAfterMouseDown.forEach(function (v) {\n        v.remove && v.remove();\n      });\n    }\n  }, {\n    key: 'getSliderStart',\n    value: function getSliderStart() {\n      var slider = this.context.timeSliderDOM.children[0];\n      var rect = slider.getBoundingClientRect();\n      return rect.left;\n    }\n  }, {\n    key: 'calcValueByPos',\n    value: function calcValueByPos(position) {\n      var pixelOffset = position - this.getSliderStart();\n      return pixelOffset;\n    }\n  }, {\n    key: 'onStart',\n    value: function onStart(position) {\n      var value = this.calcValueByPos(position);\n      var timeSliderDOM = this.context.timeSliderDOM.children[0];\n      var sliderLength = timeSliderDOM.clientWidth;\n      if (value < 0) {\n        value = 0;\n      }\n      if (value > sliderLength) {\n        value = sliderLength;\n      }\n      var percent = value / sliderLength;\n      var defaultPercent = this.props.defaultPercent;\n\n      if (defaultPercent || defaultPercent === 0) {\n        this.percent = percent;\n        this.setState({ random: Math.random() });\n      }\n      this.onChange(percent);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          percent = _props.percent,\n          defaultPercent = _props.defaultPercent,\n          children = _props.children,\n          other = (0, _objectWithoutProperties3.default)(_props, ['percent', 'defaultPercent', 'children']);\n\n      if (this.percent === undefined) {\n        this.percent = percent || defaultPercent || 0;\n      }\n      var style = (0, _extends3.default)({}, this.props.style);\n      style.left = this.percent * 100 + '%';\n      return _react2.default.createElement(\n        'div',\n        (0, _extends3.default)({}, other, { style: style, ref: 'selection' }),\n        children\n      );\n    }\n  }]);\n  return Selection;\n}(_react2.default.Component), _class.propTypes = {}, _class.displayName = 'Selection', _class.contextTypes = {\n  timeSliderDOM: _propTypes2.default.object\n}, _temp2);\nexports.default = Selection;"]},"metadata":{},"sourceType":"script"}