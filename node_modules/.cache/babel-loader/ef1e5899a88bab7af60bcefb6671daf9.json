{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MaGent\\\\Desktop\\\\video\\\\video\\\\src\\\\page\\\\BiliBili\\\\Search\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport { NavLink, Route, BrowserRouter as Router } from 'react-router-dom';\nimport AnimatedRouter from 'react-animated-router';\nimport { localStorageGet, localStorageSet } from '../../../StorageGS';\nimport results from './results';\nimport './index.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class index extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isShow: false,\n      searchHistory: [],\n      searchInfo: ''\n    };\n\n    this.showSearchhistory = () => {\n      this.setState({\n        isShow: true\n      });\n    };\n\n    this.closeSearchhistory = () => {\n      this.setState({\n        isShow: false\n      });\n    };\n\n    this.Search = () => {\n      let {\n        searchHistory,\n        searchInfo\n      } = this.state;\n\n      if (searchInfo !== '') {\n        if (searchHistory.length === 10) {\n          searchHistory.pop();\n        }\n\n        localStorageSet(\"searchHistory\", JSON.stringify([searchInfo, ...searchHistory]));\n      }\n    };\n\n    this.inputChange = e => {\n      // 使用input默认value之后无法通过键盘更改  一下searchInfo与value互通后即可解决\n      this.setState({\n        searchInfo: e.target.value\n      });\n    };\n\n    this.deleHistory = index => {\n      let searchHistory = this.state.searchHistory;\n      searchHistory.splice(index, 1);\n      this.setState({\n        searchHistory\n      });\n      localStorageSet(\"searchHistory\", JSON.stringify(searchHistory));\n    };\n\n    this.setInput = item => {\n      this.setState({\n        searchInfo: item,\n        isShow: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (localStorageGet(\"searchHistory\") !== null) {\n      this.setState({\n        searchHistory: JSON.parse(localStorageGet(\"searchHistory\"))\n      });\n    } // let script2 = document.createElement('script')\n    // script2.type = 'text/javascript'\n    // script2.src = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TimelineLite.min.js'\n    // document.getElementById('root').appendChild(script2)\n    // let script3 = document.createElement('script')\n    // script3.type = 'text/javascript'\n    // script3.src = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenLite.min.js'\n    // document.getElementById('root').appendChild(script3)\n    // let script4 = document.createElement('script')\n    // script4.type = 'text/javascript'\n    // script4.src = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenMax.min.js'\n    // document.getElementById('root').appendChild(script4)\n    // let script = document.createElement('script')\n    // script.type = 'text/javascript'\n    // script.src = 'http://81.71.103.97/swiper/search.js'\n    // document.getElementById('root').appendChild(script)\n\n  } // 打开历史搜索记录\n\n\n  render() {\n    const {\n      isShow,\n      searchHistory,\n      searchInfo\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: /*#__PURE__*/_jsxDEV(AnimatedRouter, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/bilibili/Search\",\n            render: () => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"search\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"search-mask\",\n                  onClick: this.closeSearchhistory,\n                  style: isShow ? {\n                    display: 'block'\n                  } : {\n                    display: 'none'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"nav-search-box\",\n                  children: [/*#__PURE__*/_jsxDEV(\"form\", {\n                    id: \"nav_searchform\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"nav-search-keyword\",\n                      value: searchInfo,\n                      onChange: e => this.inputChange(e),\n                      onFocus: this.showSearchhistory,\n                      type: \"text\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 123,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"nav-search-btn\",\n                      children: /*#__PURE__*/_jsxDEV(NavLink, {\n                        className: \"bilifont bili-icon_dingdao_sousuo nav-search-submit\",\n                        onClick: () => this.Search(),\n                        to: {\n                          pathname: '/bilibili/Search/results/comprehensive',\n                          state: {\n                            keyword: searchInfo\n                          }\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 125,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                    id: \"bilibili-search-history\",\n                    style: isShow && searchHistory.length !== 0 ? {\n                      display: 'block'\n                    } : {\n                      display: 'none'\n                    },\n                    className: \"bilibili-search-history report-wrap-module history\",\n                    children: (searchHistory || []).map((item, index) => {\n                      return /*#__PURE__*/_jsxDEV(\"li\", {\n                        className: \"history-item\",\n                        onClick: () => this.setInput(item),\n                        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                          children: item\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 133,\n                          columnNumber: 57\n                        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"bilifont bili-icon_sousuo_yichu cancel-icon\",\n                          onClick: () => this.deleHistory(index)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 134,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 132,\n                        columnNumber: 53\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 33\n              }, this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/bilibili/Search/results\",\n            component: results\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/MaGent/Desktop/video/video/src/page/BiliBili/Search/index.jsx"],"names":["React","Component","NavLink","Route","BrowserRouter","Router","AnimatedRouter","localStorageGet","localStorageSet","results","index","state","isShow","searchHistory","searchInfo","showSearchhistory","setState","closeSearchhistory","Search","length","pop","JSON","stringify","inputChange","e","target","value","deleHistory","splice","setInput","item","componentDidMount","parse","render","display","pathname","keyword","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { NavLink,Route, BrowserRouter as Router } from 'react-router-dom'\r\n\r\nimport AnimatedRouter from 'react-animated-router'\r\nimport { localStorageGet, localStorageSet } from '../../../StorageGS';\r\n\r\nimport results from './results'\r\n\r\nimport './index.scss'\r\n\r\nexport default class index extends Component {\r\n\r\n    state = {\r\n        isShow: false,\r\n        searchHistory: [],\r\n        searchInfo: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(localStorageGet(\"searchHistory\") !== null) {\r\n            this.setState({\r\n                searchHistory: JSON.parse(localStorageGet(\"searchHistory\"))\r\n            })\r\n        }\r\n        // let script2 = document.createElement('script')\r\n        // script2.type = 'text/javascript'\r\n        // script2.src = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TimelineLite.min.js'\r\n        // document.getElementById('root').appendChild(script2)\r\n\r\n        // let script3 = document.createElement('script')\r\n        // script3.type = 'text/javascript'\r\n        // script3.src = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenLite.min.js'\r\n        // document.getElementById('root').appendChild(script3)\r\n\r\n        // let script4 = document.createElement('script')\r\n        // script4.type = 'text/javascript'\r\n        // script4.src = 'https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenMax.min.js'\r\n        // document.getElementById('root').appendChild(script4)\r\n\r\n        // let script = document.createElement('script')\r\n        // script.type = 'text/javascript'\r\n        // script.src = 'http://81.71.103.97/swiper/search.js'\r\n        // document.getElementById('root').appendChild(script)\r\n\r\n    }\r\n\r\n    // 打开历史搜索记录\r\n    showSearchhistory = () => {\r\n        this.setState({\r\n            isShow: true\r\n        })\r\n    }\r\n\r\n    // 关闭历史搜索记录\r\n    closeSearchhistory = () => {\r\n        this.setState({\r\n            isShow: false\r\n        })\r\n    }\r\n\r\n    // 点击搜索  存储搜索记录\r\n    Search = () => {\r\n        let {searchHistory, searchInfo} = this.state\r\n        if(searchInfo !== ''){\r\n            if(searchHistory.length === 10) {\r\n                searchHistory.pop()\r\n            }\r\n            localStorageSet(\"searchHistory\", JSON.stringify([searchInfo,...searchHistory]))\r\n        }\r\n    }\r\n\r\n    // 将搜索词条保存本地\r\n    inputChange = (e) => {\r\n        // 使用input默认value之后无法通过键盘更改  一下searchInfo与value互通后即可解决\r\n        this.setState({\r\n            searchInfo: e.target.value\r\n        })\r\n    }\r\n\r\n    // 删除指定搜索信息\r\n    deleHistory = (index) => {\r\n        let searchHistory = this.state.searchHistory\r\n        searchHistory.splice(index, 1)\r\n        this.setState({\r\n            searchHistory \r\n        })\r\n        localStorageSet(\"searchHistory\", JSON.stringify(searchHistory))\r\n    }\r\n\r\n    // 使用历史搜索记录\r\n    setInput = (item) => {\r\n        this.setState({\r\n            searchInfo: item,\r\n            isShow: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {isShow, searchHistory, searchInfo } = this.state\r\n        return (\r\n            <div>\r\n\r\n                <Router>\r\n\r\n                    <AnimatedRouter>\r\n\r\n                        <Route exact path=\"/bilibili/Search\" render={ () => {\r\n                            return(\r\n                                <div className=\"search\">\r\n                                <div className=\"search-mask\"  onClick={ this.closeSearchhistory }  style={isShow ? {display:'block'} : {display:'none'}}></div>\r\n                                {/* 伸缩搜索框\r\n                                <form class=\"search\">\r\n                                    <input class=\"search-input\" id=\"input\" type=\"text\" autocomplete=\"off\"/>\r\n                                    <label class=\"search-label\" for=\"input\"></label>\r\n                                    <button class=\"search-button\" type=\"reset\"></button>\r\n                                    <div class=\"search-border\"></div>\r\n                                    <div class=\"search-btn\">搜索</div>\r\n                                    <div class=\"search-close\">x</div>\r\n                                </form> */}\r\n                \r\n                                <div className=\"nav-search-box\">\r\n                                    <form id=\"nav_searchform\">\r\n                                        <input className=\"nav-search-keyword\" value={ searchInfo } onChange={ (e) => this.inputChange(e) } onFocus={ this.showSearchhistory } type=\"text\" />\r\n                                        <div className=\"nav-search-btn\">\r\n                                            <NavLink className=\"bilifont bili-icon_dingdao_sousuo nav-search-submit\" onClick={ () => this.Search() }  to={{ pathname: '/bilibili/Search/results/comprehensive',state: {keyword: searchInfo} }} ></NavLink>\r\n                                        </div>\r\n                                    </form>\r\n                                    <ul id=\"bilibili-search-history\" style={isShow && searchHistory.length !== 0 ? {display:'block'} : {display:'none'}} className=\"bilibili-search-history report-wrap-module history\">\r\n                                        {\r\n                                            (searchHistory || []).map((item, index) => {\r\n                                                return(\r\n                                                    <li className=\"history-item\" onClick={ () => this.setInput(item) }>\r\n                                                        <a>{ item }</a>\r\n                                                        <i className=\"bilifont bili-icon_sousuo_yichu cancel-icon\" onClick={ () => this.deleHistory(index) }></i>\r\n                                                    </li>\r\n                                                )\r\n                                            })\r\n                                        }\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                            )\r\n                        } }></Route>\r\n\r\n                        <Route path=\"/bilibili/Search/results\" component={ results }></Route>\r\n                    </AnimatedRouter>\r\n\r\n                </Router>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}